<!DOCTYPE html>
<html lang="es"><head>
<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/tabby.min.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.335">

  <meta name="author" content="Master in Computational Social Sciences ‚Ä¢ 2023-2024">
  <title>Data programming</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="index_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="index_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="img/data-science-2.jpeg" data-background-opacity="0.2" data-background-size="cover" class="quarto-title-block center">
  <h1 class="title">Data programming</h1>
  <p class="subtitle">Data Analysis in R</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Master in Computational Social Sciences ‚Ä¢ 2023-2024 
</div>
</div>
</div>

</section>
<section>
<section id="welcome-to-r" class="title-slide slide level1 center">
<h1>Welcome to R!</h1>
<p><span style="color:#444442;"><strong>Put your spreadsheets aside</strong></span></p>
</section>
<section id="hi" class="slide level2">
<h2>Hi!</h2>
<p><span class="hl-green"><strong>Mail</strong></span>: <strong><a href="mailto:javiealv@pa.uc3m.es" class="email">javiealv@pa.uc3m.es</a></strong> and <strong><a href="mailto:javalv09@ucm.es" class="email">javalv09@ucm.es</a></strong>.</p>
<div class="columns">
<div class="column" style="width:30%;">
<p><img data-src="img/me.jpeg"></p>
</div><div class="column" style="width:70%;">
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Javier √Ålvarez Li√©bana</strong></span> from Carabanchel (Madrid).</p></li>
<li class="fragment"><p>Degree in Mathematics (UCM). <span class="hl-yellow"><strong>PhD in Statistics</strong></span> (UGR).</p></li>
<li class="fragment"><p>In charge of <span class="hl-yellow"><strong>data visualization and analysis for the Principality of Asturias (2021-2022)</strong></span> during the COVID pandemic.</p></li>
<li class="fragment"><p>Member of the <span class="hl-yellow"><strong>Spanish Society of Statistics and OR</strong></span> and the <span class="hl-yellow"><strong>Spanish Royal Mathematical Society</strong></span>.</p></li>
</ul>
</div>
</div>
</div>
<div class="fragment">
<p>Currently, <span class="hl-yellow"><strong>researcher and lecturer at the Faculty of Statistics of the UCM</strong></span>. Disseminating via <a href="https://twitter.com/dadosdelaplace"><strong>Twitter</strong></a> and <a href="https://instagram.com/javieralvarezliebana"><strong>Instagram</strong></a>.</p>
</div>
</section>
<section id="goals" class="slide level2">
<h2>Goals</h2>
<div class="columns">
<div class="column" style="width:37%;">
<p><img data-src="https://assets-global.website-files.com/6092cb6b4ac959f39728dd26/6188a97fa499b5fbfe410417_target%20(1).png"></p>
</div><div class="column" style="width:63%;">
<div>
<ul>
<li class="fragment"><p>Take away the <span class="hl-yellow"><strong>fear of programming errors</strong></span> ‚Üí learn to program by programming</p></li>
<li class="fragment"><p>Understanding <span class="hl-yellow"><strong>basic R concepts</strong></span> from scratch ‚Üí learning to abstract ideas and algorithms</p></li>
<li class="fragment"><p>Utility of programming ‚Üí <span class="hl-yellow"><strong>reproducible</strong>, <strong>transparent</strong></span> and maintainable workflows.</p></li>
<li class="fragment"><p>Introduction to <span class="hl-yellow"><strong>analysis and preprocessing</strong></span> of data ‚Üí <code>{tidyverse}</code>.</p></li>
<li class="fragment"><p>Handling <span class="hl-yellow"><strong>advanced data types</strong></span> ‚Üí <code>{forcats}</code>, <code>{lubridate}</code> and <code>{purrr}</code> packages</p></li>
</ul>
</div>
</div>
</div>
</section>
<section id="evaluation" class="slide level2">
<h2>Evaluation</h2>
<ul>
<li><span class="hl-yellow"><strong>Attendance and individual participation</strong></span> in the class (10%)</li>
</ul>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Individual work done during the course</strong></span> (60%). Throughout the course there are <span class="hl-purple"><strong>3 individual task submissions</strong></span>.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Group work</strong></span> done at the end of the course (30%) (between 2 and 4 people), in which the analysis of a real case must be presented.</li>
</ul>
</div>
</section>
<section id="plannning" class="slide level2">
<h2>Plannning</h2>
<div class="column-screen-inset-right">
<div style="font-size:20px">
<table>
<thead>
<tr class="header">
<th style="text-align: center;">LESSON</th>
<th style="text-align: center;">WEEK</th>
<th style="text-align: center;">DATE</th>
<th style="text-align: center;">TOPIC</th>
<th style="text-align: center;">SCRIPTS</th>
<th style="text-align: center;">EJ.</th>
<th style="text-align: center;">CASO PR√ÅCTICO</th>
<th style="text-align: center;">ENTREGA</th>
<th style="text-align: center;"></th>
<th style="text-align: center;"></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-1-primeros-pasos">1</a></td>
<td style="text-align: center;">S1</td>
<td style="text-align: center;">14 sep</td>
<td style="text-align: center;">R base programming</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno">üíª</a> <a href="#/tu-turno-1">üíª</a> <a href="#/tu-turno-1a">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-1">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-2">2</a></td>
<td style="text-align: center;">S2</td>
<td style="text-align: center;">26 sep</td>
<td style="text-align: center;">First databases: tibbles and tidy data</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-tibble">üíª</a> <a href="#/tu-turno-2">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-2">üê£</a> <a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-3">3</a></td>
<td style="text-align: center;">S3</td>
<td style="text-align: center;">28 sep</td>
<td style="text-align: center;">Tidyverse: rows</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-3">üíª</a> <a href="#/tu-turno-3a">üíª</a> <a href="#/tu-turno-3b">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-4">4</a></td>
<td style="text-align: center;">S4</td>
<td style="text-align: center;">5 oct</td>
<td style="text-align: center;">Tidyverse: columns</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-5">5</a></td>
<td style="text-align: center;">S5</td>
<td style="text-align: center;">10 oct</td>
<td style="text-align: center;">Control flow structures and rmarkdown</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-6">6</a></td>
<td style="text-align: center;">S6</td>
<td style="text-align: center;">19 oct</td>
<td style="text-align: center;">Tidyverse: summarising</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-7">7</a></td>
<td style="text-align: center;">S7</td>
<td style="text-align: center;">24 oct</td>
<td style="text-align: center;">Functions</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="even">
<td style="text-align: center;"><a href="#/clase-8">8</a></td>
<td style="text-align: center;">S7</td>
<td style="text-align: center;">26 oct</td>
<td style="text-align: center;">Advance data types: list, factors and strings</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
<tr class="odd">
<td style="text-align: center;"><a href="#/clase-9">9</a></td>
<td style="text-align: center;">S10</td>
<td style="text-align: center;">16 nov</td>
<td style="text-align: center;">Advance data management</td>
<td style="text-align: center;"><a href="https://github.com/dadosdelaplace/mucss-data-programming/material/scripts">üìù</a></td>
<td style="text-align: center;"><a href="#/tu-turno-4">üíª</a></td>
<td style="text-align: center;"><a href="#/caso-pr√°ctico-3">üê£</a></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
<td style="text-align: center;"></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="plannning-1" class="slide level2">
<h2>Plannning</h2>
<ul>
<li><p>Individual Task I (10%): 24th October (R base, databases, tidydata)</p></li>
<li><p>Individual Task II (20%): 7th November (Tidyverse, control flow structures, functions)</p></li>
<li><p>Individual Task III (30%): 7th December (all contents)</p></li>
</ul>
</section>
<section id="materials" class="slide level2">
<h2>Materials</h2>
<ul>
<li><span class="hl-yellow"><strong>Slides</strong></span>: the slides that we will use in the classroom throughout the course, structured by classes, will be available and updated at <strong><a href="https://javieralvarezliebana.es/mucss-data-programming/slides" class="uri">https://javieralvarezliebana.es/mucss-data-programming/slides</a></strong>.</li>
</ul>
<p>In the slide menu (bottom left) you have an <span class="hl-yellow"><strong>option to download them in pdf</strong></span> under <code>Tools</code> (tip: do not do this until the end of the course as they will be modified).</p>
<p>&nbsp;</p>
<ul>
<li><span class="hl-yellow"><strong>Package summaries</strong></span>: <a href="https://github.com/dadosdelaplace/mucss-data-programming/tree/main/cheatsheets"><strong>package cheatsheets</strong></a> in .pdf format</li>
</ul>
</section></section>
<section>
<section id="clase-1-primeros-pasos" class="title-slide slide level1 center">
<h1>Lesson 1: R base programming</h1>
<p><span style="color:#444442;"><strong>Introduction to R and RStudio ecosystems. Working with projects. First uses of functions and packages. Basic data types.</strong></span></p>
</section>
<section id="requirements" class="slide level2">
<h2>Requirements</h2>
<p>For the course the only requirements will be:</p>
<ol type="1">
<li><p><span class="hl-yellow"><strong>Internet connection</strong></span> (for downloading some data and packages).</p></li>
<li><p><span class="hl-yellow"><strong>Installing R</strong></span><span class="fragment fade-in">: it will be our language. The download will be done (free of charge) from <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a></span></p></li>
</ol>
<div class="fragment fade-in">
<ol start="3" type="1">
<li><span class="hl-yellow"><strong>Installing RStudio</strong></span> from <a href="https://posit.co/download/rstudio-desktop/" class="uri">https://posit.co/download/rstudio-desktop/</a></li>
</ol>
</div>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/cranR.jpg" width="420"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/rstudio.jpg" width="420"></p>
</div>
</div>
</section>
<section class="slide level2">

<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/gramatica.webp" width="400"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/word.jpg" width="470"></p>
</div>
</div>
<div class="fragment fade-in-then-out">
<p>We will program as we write (English, for example) ‚Üí <code>R</code> is the <span class="hl-yellow"><strong>language</strong></span></p>
</div>
<div class="fragment fade-up">
<ul>
<li>We will need a <span class="hl-yellow"><strong>grammar</strong></span> (<code>R</code>)</li>
</ul>
<div class="fragment fade-in">
<ul>
<li>And an environment, for example a <span class="hl-yellow"><strong>Word</strong></span> (<code>RStudio</code>), to write it in.</li>
</ul>
</div>
</div>
</section>
<section id="installing-r" class="slide level2">
<h2>Installing R</h2>
<p>The <code>R</code> language will be our <span class="hl-yellow"><strong>grammar and spelling</strong></span> (our rules).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 1</strong></span>: go to <a href="https://cran.r-project.org/" class="uri">https://cran.r-project.org/</a> and select your operating system.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 2</strong></span>: for Mac just click on the <strong>.pkg file</strong>, and open it once downloaded. For Windows systems, click on <strong>install R for the first time</strong> and then on <strong>Download R for Windows</strong>. Once downloaded, open it like any other installation file.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 3</strong></span>: open the installation executable.</p></li>
</ul>
</div>
<div class="fragment">
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Whenever you download something from CRAN (either R itself or a package), <span class="hl-orange"><strong>make sure you have an internet connection</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="first-steps" class="slide level2">
<h2>First steps</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>To check that it has been installed correctly, after opening <code>R</code>, you should see a <strong>white screen</strong> similar to this one.</p>
<p>That ‚Äúwhite screen‚Äù is called <span class="hl-yellow"><strong>console</strong></span> and we can make a first use of it as a <strong>calculator</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Idea</strong></span>: let us define a variable called <code>a</code>, and it will be assigned the value <code>1</code> (type the code below in the console and hit ‚Äúenter‚Äù).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb1" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="first-steps-1" class="slide level2">
<h2>First steps</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>To check that it has been installed correctly, after opening <code>R</code>, you should see a <strong>white screen</strong> similar to this one.</p>
<p>That ‚Äúwhite screen‚Äù is called <span class="hl-yellow"><strong>console</strong></span> and we can make a first use of it as a <strong>calculator</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="200"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: we will define another variable called <code>b</code> and assign it the value <code>2</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2" data-code-line-numbers="2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb2-2"><a href="#cb2-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note that‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>In <code>R</code> we use <code>&lt;-</code> as an arrow: the variable to the left of the arrow is assigned the value to the right (e.g.&nbsp;<code>a &lt;- 1</code>).</p>
</div>
</div>
</div>
</div>
</section>
<section id="first-steps-2" class="slide level2">
<h2>First steps</h2>
<div class="columns">
<div class="column" style="width:65%;">
<p>To check that it has been installed correctly, after opening <code>R</code>, you should see a <strong>white screen</strong> similar to this one.</p>
<p>That ‚Äúwhite screen‚Äù is called <span class="hl-yellow"><strong>console</strong></span> and we can make a first use of it as a <strong>calculator</strong>.</p>
</div><div class="column" style="width:35%;">
<p><img data-src="img/consola.jpg" width="270"></p>
</div>
</div>
<p><span class="hl-yellow"><strong>Idea</strong></span>: we will do the sum <code>a + b</code> and it will return its result.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3" data-code-line-numbers="3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>a <span class="ot">&lt;-</span> <span class="dv">1</span></span>
<span id="cb3-2"><a href="#cb3-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb3-3"><a href="#cb3-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</section>
<section id="installing-r-studio" class="slide level2">
<h2>Installing R Studio</h2>
<p><code>RStudio</code> will be the <span class="hl-yellow"><strong>Word</strong></span> that we will use to write (what is known as an <span class="hl-yellow"><strong>IDE: integrated development environment</strong></span>).</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 1</strong></span>: go to the <a href="https://posit.co/download/rstudio-desktop/">official RStudio website</a> (now called Posit) and select the free download.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 2</strong></span>: select the executable that appears according to your operating system.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Step 3</strong></span>: after downloading the executable, open it like any other executable and let the installation finish.</p></li>
</ul>
</div>
</section>
<section id="pane-layout-in-rstudio" class="slide level2">
<h2>Pane layout in RStudio</h2>
<p>When you open <code>RStudio</code> you will probably have three windows:</p>
<ul>
<li><span class="hl-yellow"><strong>Console</strong></span>: this is the name to call the big window that takes up a good part of your screen. Try writing the same code as before (the sum of the variables) in it. The console will be where we will <strong>execute commands and show results</strong>.</li>
</ul>

<img data-src="img/consola_rstudio.jpg" width="420" class="r-stretch"></section>
<section id="pane-layout-in-rstudio-1" class="slide level2">
<h2>Pane layout in RStudio</h2>
<p>When you open <code>RStudio</code> you will probably have three windows:</p>
<ul>
<li><span class="hl-yellow"><strong>Environment</strong></span>: the small screen (you can adjust the margins) located at the upper right part. It will show us the <strong>variables we have defined</strong>.</li>
</ul>

<img data-src="img/environment.jpg" width="420" class="r-stretch"></section>
<section id="pane-layout-in-rstudio-2" class="slide level2">
<h2>Pane layout in RStudio</h2>
<p>When you open <code>RStudio</code> you will probably have three windows:</p>
<ul>
<li><span class="hl-yellow"><strong>Multi-purpose panel</strong></span>: the window at the bottom right will not only be used to search for <strong>function help</strong>, but also to <strong>view graphics</strong>.</li>
</ul>

<img data-src="img/multiusos.jpg" width="420" class="r-stretch"></section>
<section id="why-r" class="slide level2">
<h2>Why R?</h2>

<img data-src="img/meme_barco.jpg" class="r-stretch"></section>
<section id="why-r-1" class="slide level2">
<h2>Why R?</h2>
<p><code>R</code> is the <span class="hl-yellow"><strong>main statistical language</strong></span>, created by and for statisticians, with 5 fundamental advantages <span class="hl-red"><strong>over Excel</strong></span>:</p>
<div>
<ul>
<li class="fragment"><p><span class="hl-yellow"><strong>Programming language</strong></span>: obviousness ‚Üí <span class="hl-purple"><strong>replicable</strong></span> analysis.</p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Free of charge</strong></span>: the philosophy of the <code>R</code> community is code sharing under <strong>copyleft</strong> ‚Üí <span class="hl-purple"><strong>ethical use of public money</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Open source</strong></span>: not only is it free but it allows free access to other people‚Äôs code, even to <strong>own source code</strong> ‚Üí <span class="hl-purple"><strong>flexibility and transparency</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>Modular language</strong></span>: there are other people‚Äôs code that we can reuse (almost 20 000 <span class="hl-yellow"><strong>packages</strong></span>) ‚Üí <span class="hl-purple"><strong>time-saving</strong></span></p></li>
<li class="fragment"><p><span class="hl-yellow"><strong>High-level language</strong></span></p></li>
</ul>
</div>
</section>
<section id="why-r-2" class="slide level2">
<h2>Why R?</h2>

<img data-src="img/incel_excel.png" class="r-stretch"></section>
<section id="why-programming" class="slide level2">
<h2>Why programming?</h2>
<ul>
<li><p><span class="hl-yellow"><strong>Automate</strong></span> ‚Üí it will allow you to automate recurring tasks.</p></li>
<li><p><span class="hl-yellow"><strong>Replicability</strong></span> ‚Üí you will be able to replicate your analysis always in the same way.</p></li>
<li><p><span class="hl-yellow"><strong>Flexibility</strong></span> ‚Üí you will be able to adapt the software to your needs.</p></li>
<li><p><span class="hl-yellow"><strong>Transparency</strong></span> ‚Üí it could be audited by the community.</p></li>
</ul>

<img data-src="img/the_general_problem.png" class="r-stretch"></section>
<section id="main-idea-packages" class="slide level2">
<h2>Main idea: packages</h2>
<p>One of the key ideas of <code>R</code> is the <span class="hl-yellow"><strong>use of packages</strong></span>: codes that other people have implemented to <strong>solve a problem</strong>.</p>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>Installing</strong></span>: download the codes from the web (internet required) ‚Üí <span class="hl-purple"><strong>‚Äúbuy a book‚Äù</strong></span>, only once (per computer)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">install.packages</span>(<span class="st">"ggplot2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Loading</strong></span>: after downloading the package, we indicate which packages we want to use each time we open <code>RStudio</code> ‚Üí <span class="hl-purple"><strong>bring the book off the shelf</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="main-idea-packages-1" class="slide level2">
<h2>Main idea: packages</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/paquetes.png"></p>
</div><div class="column" style="width:65%;">
<p>Once installed, there are two ways to use a package (bring it off the shelf)</p>
<div class="fragment" data-fragment-index="1">
<ul>
<li><span class="hl-yellow"><strong>The whole package</strong></span>: with <code>library()</code>, using the package name without quotes, we load into our session the <span class="hl-purple"><strong>whole book</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a><span class="fu">library</span>(ggplot2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment" data-fragment-index="2">
<ul>
<li><span class="hl-yellow"><strong>Some particular functions</strong></span> using <code>package::function</code> we indicate that we only want a <span class="hl-purple"><strong>concrete page of that book</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a href="#cb8-1"></a>ggplot2<span class="sc">::</span><span class="fu">geom_point</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
</section>
<section id="you-will-be-wrong" class="slide level2">
<h2>You will be wrong</h2>
<p>During your learning process, it is going to be very common that things don‚Äôt go right the first time ‚Üí <span class="hl-yellow"><strong>you will make mistakes</strong></span>. Not only will it be important to assume this, but it is <span class="hl-yellow"><strong>important to read the error messages</strong></span> to learn from them.</p>
<div class="fragment">
<ul>
<li><span class="hl-red"><strong>Error messages</strong></span>: preceded by <strong>‚ÄúError in‚Ä¶‚Äù</strong> and will be those failures that <span class="hl-red"><strong>prevent execution</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a><span class="st">"a"</span> <span class="sc">+</span> <span class="dv">1</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "a" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-orange"><strong>Warning messages</strong></span>: preceded by <strong>‚ÄúWarning in‚Ä¶‚Äù</strong> are the most sensitive (possible) failures since they are inconsistencies that <span class="hl-orange"><strong>do not prevent execution</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="co"># Code is ok but the result provided a NaN value, **Not A Number**, a value that is not a (real) number</span></span>
<span id="cb11-2"><a href="#cb11-2"></a><span class="fu">sqrt</span>(<span class="sc">-</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning in sqrt(-1): NaNs produced</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NaN</code></pre>
</div>
</div>
</div>
</section>
<section id="scripts-.r-files" class="slide level2">
<h2>Scripts (.R files)</h2>
<div class="columns">
<div class="column" style="width:35%;">
<p><img data-src="img/abrir_script.jpg" width="350"></p>
</div><div class="column" style="width:65%;">
<p>A <span class="hl-yellow"><strong>script</strong></span> will be the document in which we program, our <code>.doc</code> file (here with <code>.R</code> extension) where we will write the commands. To <strong>open our first script</strong>, click in the menu on <code>File &lt; New File &lt; R Script</code>.</p>
</div>
</div>
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Be careful</strong></p>
</div>
<div class="callout-content">
<p>It is important <strong>not to overuse the console</strong>: everything you do not write in a script, when you close, <span class="hl-orange"><strong>you will have lost it</strong></span>.</p>
</div>
</div>
</div>
</section>
<section id="executing-the-first-script" class="slide level2">
<h2>Executing the first script</h2>
<p>Now we have a <strong>fourth window</strong>: the window where we <span class="hl-yellow"><strong>write our codes</strong></span>. How to run it?</p>
<div class="fragment">
<ol type="1">
<li><strong>We write</strong> the code to execute.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Save</strong> the .R file by clicking on <code>Save current document</code>.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>The code is not executed unless we tell it to do so. We have three options:</li>
</ol>
<ul>
<li><span class="hl-yellow"><strong>Copy and paste</strong></span> into console.</li>
<li><span class="hl-yellow"><strong>Select lines</strong></span> and <code>Ctrl+Enter</code>.</li>
<li><span class="hl-yellow"><strong>Enable Source on save</strong></span> to the right of save: it not only saves but executes the <strong>whole code</strong>.</li>
</ul>
</div>
</section>
<section id="tu-turno" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Execute your first script</strong>: create a script from scratch, program as indicated below and execute it (in the 3 possible ways)</span></p>
<div class="panel-tabset">
<ul id="tabset-1" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-1-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-1-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-1-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-1-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li><li><a href="#tabset-1-5"><span class="hl-yellow"><strong>Exercise 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-1-1">
<p>üìù Define a variable named <code>a</code> and whose value is -1.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a>a <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-2">
<p>üìù Add below another line to define a variable <code>b</code> with value 5. Then multiply both variables.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a>b <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb15-2"><a href="#cb15-2"></a>a <span class="sc">*</span> b <span class="co"># no saved</span></span>
<span id="cb15-3"><a href="#cb15-3"></a>mult <span class="ot">&lt;-</span> a <span class="sc">*</span> b <span class="co"># saved</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-3">
<p>üìù Modify the code below to define two variables c and d, with values 3 and -1. Then split the variables.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a>c <span class="ot">&lt;-</span> <span class="co"># you should assign the value 3</span></span>
<span id="cb16-2"><a href="#cb16-2"></a>d <span class="ot">&lt;-</span> <span class="co"># you should assign the value -1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>c <span class="ot">&lt;-</span> <span class="dv">3</span></span>
<span id="cb17-2"><a href="#cb17-2"></a>d <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">1</span></span>
<span id="cb17-3"><a href="#cb17-3"></a>c <span class="sc">/</span> d <span class="co"># no saved</span></span>
<span id="cb17-4"><a href="#cb17-4"></a>div <span class="ot">&lt;-</span> c <span class="sc">/</span> d <span class="co"># saved</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-4">
<p>üìù Assign a positive value to <code>x</code> and calculate its square root; assign another negative <code>y</code> and calculate its absolute value with the <code>abs()</code> function.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>x <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">sqrt</span>(x)</span>
<span id="cb18-3"><a href="#cb18-3"></a></span>
<span id="cb18-4"><a href="#cb18-4"></a>y <span class="ot">&lt;-</span> <span class="sc">-</span><span class="dv">2</span></span>
<span id="cb18-5"><a href="#cb18-5"></a><span class="fu">abs</span>(y)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-1-5">
<p>üìù Using the variable <code>x</code> already defined, complete/modify the code below to store in a new variable <code>z</code> the result stored in <code>x</code> minus 5.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1"></a>z <span class="ot">&lt;-</span> ? <span class="sc">-</span> ? <span class="co"># complete the code</span></span>
<span id="cb19-2"><a href="#cb19-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a>z <span class="ot">&lt;-</span> x <span class="sc">-</span> <span class="dv">5</span></span>
<span id="cb20-2"><a href="#cb20-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note that‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>Functions as<code>sqrt()</code>, <code>abs()</code> or <code>max()</code> are what we call <span class="hl-purple"><strong>functions</strong></span>: lines of code that we have ‚Äúencapsulated‚Äù under a name, and given some input arguments, execute the commands (a kind of shortcut).</p>
</div>
</div>
</div>
</section>
<section id="be-organized-projects" class="slide level2">
<h2>Be organized: projects</h2>
<p>In the same way that on the computer we usually work <span class="hl-yellow"><strong>ordered by folders</strong></span>, in <code>RStudio</code> we can do the same to work in <span class="hl-yellow"><strong>efficient way by creating projects</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:60%;">
<p>A <span class="hl-yellow"><strong>project will be a ‚Äúfolder‚Äù</strong></span> inside <code>RStudio</code>, so our working directory will automatically be the project folder itself (you can switch from one project to another with the top right menu).</p>
<p>We can create one in a new folder or in an existing folder.</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/rstudio_proyectos.png" width="370"></p>
</div>
</div>
</div>
</section>
<section id="from-the-value-to-the-database" class="slide level2">
<h2>From the VALUE to the DATABASE</h2>
<p>What <span class="hl-yellow"><strong>data type</strong></span> can we have in each cell of a <strong>database</strong>?</p>

<img data-src="img/celdas.jpg" class="r-stretch quarto-figure-center"><div>
<ul>
<li class="fragment"><span class="hl-yellow"><strong>Cell (single value)</strong></span>: single data of a specific type.</li>
<li class="fragment"><span class="hl-yellow"><strong>Variable</strong></span>: <strong>concatenation</strong> of values of the same type (<span class="hl-purple"><strong>vectors</strong></span>).</li>
<li class="fragment"><span class="hl-yellow"><strong>Matrix</strong></span>: concatenation of variables of <strong>same type and length</strong>.</li>
<li class="fragment"><span class="hl-yellow"><strong>Data table</strong></span>: concatenation of variables of <span class="hl-purple"><strong>different type but equal length</strong></span>.</li>
<li class="fragment"><span class="hl-yellow"><strong>List</strong></span>: concatenation of variables of <span class="hl-purple"><strong>different type and different length</strong></span></li>
</ul>
</div>
</section>
<section id="type-of-single-data" class="slide level2">
<h2>Type of (single) data</h2>
<p>Are there <span class="hl-yellow"><strong>variables beyond numbers</strong></span>?</p>
<div class="fragment">
<p>Let us think, for example, of a person‚Äôs stored data:</p>
<div class="fragment fade-up">
<ul>
<li>The age or weight will be a <span class="hl-yellow"><strong>numeric variable</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a>age <span class="ot">&lt;-</span> <span class="dv">33</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Its name will be a string of <span class="hl-yellow"><strong>text (string or char)</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1"></a>name <span class="ot">&lt;-</span> <span class="st">"javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>To the question ‚ÄúAre you single?‚Äù, the answer will be what we call as a <span class="hl-yellow"><strong>logical variable</strong></span> (<code>TRUE</code> if you are single or <code>FALSE</code> otherwise).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>single <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
<div class="fragment fade-up">
<ul>
<li>Your date of birth will be just that, a <span class="hl-yellow"><strong>date</strong></span>.</li>
</ul>
</div>
</div>
</section>
<section id="numeric-variables" class="slide level2">
<h2>Numeric variables</h2>
<p>The simplest data (we have already used it) will be the <span class="hl-yellow"><strong>numeric variables</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a>a <span class="ot">&lt;-</span> <span class="dv">5</span></span>
<span id="cb24-2"><a href="#cb24-2"></a>b <span class="ot">&lt;-</span> <span class="dv">2</span></span>
<span id="cb24-3"><a href="#cb24-3"></a>a <span class="sc">+</span> b</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>To know the type of a variable we have the function <code>class()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1"></a><span class="fu">class</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "numeric"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>With numeric variables we can perform the <span class="hl-yellow"><strong>arithmetic operations</strong></span> of a calculator: addition (<code>+</code>), square root (<code>sqrt()</code>), square (<code>^2</code>), etc.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1"></a>a<span class="sc">^</span><span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 25</code></pre>
</div>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1"></a><span class="fu">abs</span>(a)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5</code></pre>
</div>
</div>
</div>
</section>
<section id="string-variables" class="slide level2">
<h2>String variables</h2>
<p>Let us imagine that, in addition to the age of a person, we want to store his/her name: now the variable will be of type <code>character</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Javier"</span></span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">class</span>(name)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "character"</code></pre>
</div>
</div>
<div class="fragment">
<p><span class="hl-yellow"><strong>Strings variables</strong></span> are a type with which we obviously <span class="hl-red"><strong>cannot perform arithmetic operations</strong></span> (other operations such as pasting or locating patterns can be performed).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>name <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in name + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note that‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>String variables are <span class="hl-orange"><strong>ALWAYS in quotes</strong></span>: <code>TRUE</code> (logical, binary value) is not the same as <code>"TRUE"</code> (char or string).</p>
</div>
</div>
</div>
</div>
</section>
<section id="first-function-paste" class="slide level2">
<h2>First function: paste</h2>
<p>In <code>R</code> we denote as <span class="hl-yellow"><strong>function</strong></span> a piece of <span class="hl-yellow"><strong>encapsulated code</strong></span> under a name, and which depends on some input <span class="hl-yellow"><strong>arguments</strong></span>. Our first function will be <code>paste()</code>: given two strings, it allows us to paste them together.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier √Ålvarez"</code></pre>
</div>
</div>
<div class="fragment">
<p>Note that <span class="hl-yellow"><strong>default</strong></span> pastes strings with a space, but we can add an <span class="hl-yellow"><strong>optional argument</strong></span> to tell it the separator (in <code>sep = ...</code>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a><span class="fu">paste</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>, <span class="at">sep =</span> <span class="st">"*"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier*√Ålvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="first-function-paste-1" class="slide level2">
<h2>First function: paste</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/paste_help.jpg"></p>
</div><div class="column" style="width:50%;">
<p>How to know <span class="hl-yellow"><strong>what arguments a function needs</strong></span>? By typing <code>? paste</code> in the console, you will get a <span class="hl-yellow"><strong>help</strong></span> in the multi-purpose panel.</p>
<p>In this help panel, you will see in its header what arguments the function already has <span class="hl-yellow"><strong>default</strong></span> assigned to it.</p>
</div>
</div>
<div class="fragment">
<p>There is a similar function named as <code>paste0()</code> that pastes by default with <code>sep = ""</code> (without anything else).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1"></a><span class="fu">paste0</span>(<span class="st">"Javier"</span>, <span class="st">"√Ålvarez"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Javier√Ålvarez"</code></pre>
</div>
</div>
</div>
</section>
<section id="first-package-glue" class="slide level2">
<h2>First package: glue</h2>
<p>A more intuitive way to work with string variables is to use the <code>{glue}</code> package: the first thing to do is to ‚Äúbuy the book‚Äù (if we have never done it before). After that <span class="hl-yellow"><strong>load the package</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">install.packages</span>(<span class="st">"glue"</span>)</span>
<span id="cb41-2"><a href="#cb41-2"></a><span class="fu">library</span>(glue)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">

</div>
<div class="fragment">
<p>This package allows us to use <span class="hl-yellow"><strong>variables inside strings</strong></span>. For example, ‚ÄúI am ‚Ä¶ years old‚Äù, where the age is stored in a variable.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1"></a>age <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb42-2"><a href="#cb42-2"></a><span class="fu">glue</span>(<span class="st">"I am {age} years old"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I am 33 years old</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Inside brackets we can also execute operations</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>units <span class="ot">&lt;-</span> <span class="st">"days"</span></span>
<span id="cb44-2"><a href="#cb44-2"></a><span class="fu">glue</span>(<span class="st">"I am {age * 365} {units} old"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>I am 12045 days old</code></pre>
</div>
</div>
</div>
</section>
<section id="logical-conditions" class="slide level2">
<h2>Logical conditions</h2>
<p>Another fundamental type will be the <span class="hl-yellow"><strong>logical or binary or boolean variables</strong></span> (<strong>just two values</strong>):</p>
<ul>
<li><code>TRUE</code>: <span class="hl-yellow"><strong>true</strong></span> stored internally as a 1.</li>
<li><code>FALSE</code>: <span class="hl-yellow"><strong>false</strong></span> stored internally as a 0.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>single <span class="ot">&lt;-</span> <span class="cn">TRUE</span> <span class="co"># Are you single? --&gt; YES</span></span>
<span id="cb46-2"><a href="#cb46-2"></a><span class="fu">class</span>(single)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "logical"</code></pre>
</div>
</div>
<div class="fragment">
<p>It can take a third value, <code>NA</code> or <span class="hl-yellow"><strong>missing data</strong></span>, the acronym for <em>not available</em>.</p>
</div>
<div class="fragment">
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Logical variables <span class="hl-red"><strong>NOT string variables</strong></span>: <code>"TRUE"</code> is a string, <code>TRUE</code> is a logical value.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="cn">TRUE</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a><span class="st">"TRUE"</span> <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in "TRUE" + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="logical-conditions-1" class="slide level2">
<h2>Logical conditions</h2>
<p>Logical values are usually the result of <span class="hl-yellow"><strong>evaluate logical conditions</strong></span>. For example, let us imagine we want to check if my name is Javi.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb52"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb52-1"><a href="#cb52-1"></a>name <span class="ot">&lt;-</span> <span class="st">"Mar√≠a"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>The <span class="hl-yellow"><strong>logical operator</strong></span> <code>==</code> allow us to ask if left equals right.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>name <span class="sc">==</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>With its opposite <code>!=</code> we ask if it is different.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb55"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb55-1"><a href="#cb55-1"></a>name <span class="sc">!=</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note that‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>It is not the same <code>&lt;-</code> (<span class="hl-yellow"><strong>assignment</strong></span>) as <code>==</code> (we are <span class="hl-yellow"><strong>asking</strong></span>, it is a logical comparison).</p>
</div>
</div>
</div>
</div>
</section>
<section id="logical-conditions-2" class="slide level2">
<h2>Logical conditions</h2>
<p>In addition to ‚Äúequal to‚Äù versus ‚Äúdifferent‚Äù comparisons, also order comparisons such as <code>&lt;, &lt;=, &gt; or &gt;=</code>.</p>
<p><strong>Is the person less than 32 years old?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb57"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb57-1"><a href="#cb57-1"></a>age <span class="ot">&lt;-</span> <span class="dv">38</span></span>
<span id="cb57-2"><a href="#cb57-2"></a>age <span class="sc">&lt;</span> <span class="dv">32</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
<p><strong>Age is greater than or equal to 38 years old?</strong></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb59"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb59-1"><a href="#cb59-1"></a>age <span class="sc">&gt;=</span> <span class="dv">38</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
</div>
</section>
<section id="date-variables" class="slide level2">
<h2>Date variables</h2>
<p>A very special data type: the <span class="hl-yellow"><strong>date type data</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb61"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb61-1"><a href="#cb61-1"></a>date_char <span class="ot">&lt;-</span> <span class="st">"2021-04-21"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>It looks like a simple string but <span class="hl-yellow"><strong>represents an instant in time</strong></span>. What should happen if <span class="hl-purple"><strong>we add a 1 to a date</strong></span>?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb62"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb62-1"><a href="#cb62-1"></a>date_char <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in date_char + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>Dates <span class="hl-red"><strong>cannot be string variables</strong></span>: we must convert string variables to date with <code>as_date()</code> from the <code>{lubridate}</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb64"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb64-1"><a href="#cb64-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb64-2"><a href="#cb64-2"></a>date <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"2023-03-28"</span>)</span>
<span id="cb64-3"><a href="#cb64-3"></a>date <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-03-29"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb66"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb66-1"><a href="#cb66-1"></a><span class="fu">class</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Date"</code></pre>
</div>
</div>
</div>
</section>
<section id="date-variables-1" class="slide level2">
<h2>Date variables</h2>
<p>In this package we have very useful functions for <span class="hl-yellow"><strong>handling dates</strong></span>:</p>
<ul>
<li><code>today()</code> allowes to directly obtain the <span class="hl-purple"><strong>current date</strong></span>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb68"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb68-1"><a href="#cb68-1"></a><span class="fu">today</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-29"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>now()</code> allows to obtain <span class="hl-purple"><strong>current datetime</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb70"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb70-1"><a href="#cb70-1"></a><span class="fu">now</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "2023-09-29 16:52:18 CEST"</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li><code>year()</code>, <code>month()</code> or <code>day()</code> allows us to <span class="hl-purple"><strong>extract year, month and day</strong></span> for a given date.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb72"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb72-1"><a href="#cb72-1"></a>date <span class="ot">&lt;-</span> <span class="fu">today</span>()</span>
<span id="cb72-2"><a href="#cb72-2"></a><span class="fu">year</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2023</code></pre>
</div>
<div class="sourceCode cell-code" id="cb74"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb74-1"><a href="#cb74-1"></a><span class="fu">month</span>(date)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 9</code></pre>
</div>
</div>
</div>
</section>
<section id="cheatsheets" class="slide level2">
<h2>Cheatsheets</h2>

<img data-src="img/lubridate.png" class="r-stretch"><div class="callout callout-note callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>More documentation</strong></p>
</div>
<div class="callout-content">
<p>You have a pdf summary of the most important packages in the <span class="hl-green"><strong>corresponding folder on campus</strong></span>. See also <a href="https://posit.co/resources/cheatsheets/" class="uri">https://posit.co/resources/cheatsheets/</a></p>
</div>
</div>
</div>
</section>
<section id="tu-turno-1" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-2" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-2-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-2-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-2-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-2-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-2-1">
<p>üìù Define a variable that stores your age (named as <code>age</code>) and another with your name (named as <code>name</code>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb76"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb76-1"><a href="#cb76-1"></a>age <span class="ot">&lt;-</span> <span class="dv">33</span></span>
<span id="cb76-2"><a href="#cb76-2"></a>name <span class="ot">&lt;-</span> <span class="st">"Javi"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-2">
<p>üìù Define another variable named as <code>siblings</code> that answers the question ‚Äúdo you have siblings?‚Äù and another one with the date of your birth (named as <code>birth_date</code>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb77"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb77-1"><a href="#cb77-1"></a>siblings <span class="ot">&lt;-</span> <span class="cn">TRUE</span></span>
<span id="cb77-2"><a href="#cb77-2"></a></span>
<span id="cb77-3"><a href="#cb77-3"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb77-4"><a href="#cb77-4"></a>birth_date <span class="ot">&lt;-</span> <span class="fu">as_date</span>(<span class="st">"1989-09-10"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-3">
<p>üìù Define another variable with your last names (named as <code>surnames</code>) and use <code>glue()</code> to have a single variable <code>full_name</code> (separating first and last name by a comma).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb78"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb78-1"><a href="#cb78-1"></a>surnames <span class="ot">&lt;-</span> <span class="st">"√Ålvarez Li√©bana"</span></span>
<span id="cb78-2"><a href="#cb78-2"></a><span class="fu">glue</span>(<span class="st">"{name}, {surnames}"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-2-4">
<p>üìù Compute the days that have passed from the date of your birth until today (with the date of birth defined in exercise 2).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb79"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb79-1"><a href="#cb79-1"></a><span class="fu">today</span>() <span class="sc">-</span> birth_date</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="vectors-concatenate" class="slide level2">
<h2>Vectors: concatenate</h2>
<p>Working with data usually implies having <span class="hl-yellow"><strong>columns that represent variables</strong></span>: we will call <span class="hl-yellow"><strong>vectors</strong></span> a <span class="hl-purple"><strong>concatenation</strong></span> of cells (values) of the <span class="hl-purple"><strong>same type</strong></span>.</p>
<div class="fragment">
<p>The simplest way is using the <code>c()</code> command (c, <strong>concatenate</strong>), and just introduce its <strong>elements between parentheses, and separated by commas</strong>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb80"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb80-1"><a href="#cb80-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">27</span>, <span class="dv">60</span>, <span class="dv">61</span>)</span>
<span id="cb80-2"><a href="#cb80-2"></a>age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>A single number <code>x &lt;- 1</code> (or <code>x &lt;- c(1)</code>) is actually a vector of length one.</p>
</div>
</div>
</div>
</div>
</section>
<section id="vectors-concatenate-1" class="slide level2">
<h2>Vectors: concatenate</h2>
<div class="columns">
<div class="column" style="width:40%;">
<p><img data-src="img/edades_environment.jpg"></p>
</div><div class="column" style="width:60%;">
<p>As you can see, in the <code>environment</code> area we have now a <strong>collection of elements</strong> saved</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb82"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb82-1"><a href="#cb82-1"></a>age</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61</code></pre>
</div>
</div>
</div>
</div>
<div class="fragment">
<p>The <span class="hl-yellow"><strong>length of a vector</strong></span> can be computed with <code>length()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb84"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb84-1"><a href="#cb84-1"></a><span class="fu">length</span>(age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>We can also <span class="hl-yellow"><strong>concatenate vectors themselves</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb86"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb86-1"><a href="#cb86-1"></a><span class="fu">c</span>(age, age, <span class="dv">8</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33 27 60 61 33 27 60 61  8</code></pre>
</div>
</div>
</div>
</section>
<section id="numerical-sequences" class="slide level2">
<h2>Numerical sequences</h2>
<p>Many times we will want to create <span class="hl-yellow"><strong>numeric sequences</strong></span> (for example, the days of the month). The <code>seq(start, end)</code> command allows us to create a <strong>sequence</strong> from a start element to an end element, <span class="hl-purple"><strong>advance one at a time</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb88"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb88-1"><a href="#cb88-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">31</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  1  2  3  4  5  6  7  8  9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25
[26] 26 27 28 29 30 31</code></pre>
</div>
</div>
<div class="fragment">
<p>The command <code>1:n</code> returns the same as <code>seq(1, n)</code> (if the initial element is greater than the final one, it will understand that the sequence is <span class="hl-purple"><strong>decreasing</strong></span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb90"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb90-1"><a href="#cb90-1"></a><span class="dv">1</span><span class="sc">:</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1 2 3 4 5</code></pre>
</div>
<div class="sourceCode cell-code" id="cb92"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb92-1"><a href="#cb92-1"></a><span class="dv">7</span><span class="sc">:-</span><span class="dv">3</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1]  7  6  5  4  3  2  1  0 -1 -2 -3</code></pre>
</div>
</div>
</div>
</section>
<section id="numerical-sequences-1" class="slide level2">
<h2>Numerical sequences</h2>
<p>We can also define <span class="hl-yellow"><strong>other type of discretization step</strong></span> between consecutives</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb94"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb94-1"><a href="#cb94-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">7</span>, <span class="at">by =</span> <span class="fl">0.5</span>) <span class="co"># from 1 to 7 by step = 0.5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1.0 1.5 2.0 2.5 3.0 3.5 4.0 4.5 5.0 5.5 6.0 6.5 7.0</code></pre>
</div>
</div>
<div class="fragment">
<p>In other cases we will be interested in defining a <span class="hl-yellow"><strong>sequence with a specific length</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb96"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb96-1"><a href="#cb96-1"></a><span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">50</span>, <span class="at">l =</span> <span class="dv">7</span>) <span class="co"># length 7</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  1.000000  9.166667 17.333333 25.500000 33.666667 41.833333 50.000000</code></pre>
</div>
</div>
</div>
<div class="fragment">
<p>We may even want to generate a vector of <span class="hl-yellow"><strong>n repeated elements</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb98"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb98-1"><a href="#cb98-1"></a><span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">7</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 0 0 0 0 0 0 0</code></pre>
</div>
</div>
</div>
</section>
<section id="vectors-characters" class="slide level2">
<h2>Vectors: characters</h2>
<p>A vector is a <strong>concatenation</strong> of <span class="hl-yellow"><strong>same type</strong></span> elements, but they do not necessarily have to be numerical types. Let us create an example sentence.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb100"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb100-1"><a href="#cb100-1"></a>sentence <span class="ot">&lt;-</span> <span class="st">"I am Javi"</span></span>
<span id="cb100-2"><a href="#cb100-2"></a>sentence</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I am Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb102"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb102-1"><a href="#cb102-1"></a><span class="fu">length</span>(sentence)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<div class="fragment">
<p>In the previous case it was not a vector, it was a single text element. To create a vector we must use <code>c()</code> again and separate elements with commas.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb104"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb104-1"><a href="#cb104-1"></a>vector <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"I"</span>, <span class="st">"am"</span>, <span class="st">"Javi"</span>)</span>
<span id="cb104-2"><a href="#cb104-2"></a>vector</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "I"    "am"   "Javi"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb106"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb106-1"><a href="#cb106-1"></a><span class="fu">length</span>(vector)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3</code></pre>
</div>
</div>
</div>
</section>
<section id="vectors" class="slide level2">
<h2>Vectors</h2>
<p>What will happen if we <span class="hl-yellow"><strong>concatenate elements of different type</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb108"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb108-1"><a href="#cb108-1"></a><span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="st">"javi"</span>, <span class="st">"3"</span>, <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "1"    "2"    "javi" "3"    "TRUE"</code></pre>
</div>
</div>
<p>Notice that since they are all of the same type, what <code>R</code> does is <span class="hl-yellow"><strong>convert</strong></span> everything to character, <span class="hl-red"><strong>violating data integrity</strong></span></p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb110"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb110-1"><a href="#cb110-1"></a><span class="fu">c</span>(<span class="dv">3</span>, <span class="dv">4</span>, <span class="cn">TRUE</span>, <span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4 1 0</code></pre>
</div>
</div>
<p>It is important to understand that the logical values are actually <span class="hl-yellow"><strong>stored internally as 0/1</strong></span></p>
</div>
</section>
<section id="operating-with-vectors" class="slide level2">
<h2>Operating with vectors</h2>
<p>With numeric vectors we can do the same <span class="hl-yellow"><strong>arithmetic operations</strong></span> as with numbers ‚Üí a <span class="hl-purple"><strong>number is a vector</strong></span> (of length one).</p>
<div class="fragment">
<p>What will happen if we <span class="hl-yellow"><strong>add or subtract a value</strong></span> to a vector?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb112"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb112-1"><a href="#cb112-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb112-2"><a href="#cb112-2"></a>x <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 2 4 6 8</code></pre>
</div>
<div class="sourceCode cell-code" id="cb114"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb114-1"><a href="#cb114-1"></a>x <span class="sc">*</span> <span class="dv">2</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  2  6 10 14</code></pre>
</div>
</div>
<div class="callout callout-warning callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Be careful</strong></p>
</div>
<div class="callout-content">
<p>Unless we indicate otherwise, in <code>R</code> operations with vectors are always <span class="hl-orange"><strong>element to element</strong></span></p>
</div>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-1" class="slide level2">
<h2>Operating with vectors</h2>
<p>Vectors can also interact with each other, so we can define, for example, <span class="hl-yellow"><strong>sums of vectors</strong></span> (element by element)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb116"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb116-1"><a href="#cb116-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb116-2"><a href="#cb116-2"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>)</span>
<span id="cb116-3"><a href="#cb116-3"></a>x <span class="sc">+</span> y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11</code></pre>
</div>
</div>
<div class="fragment">
<p>Since the operation (e.g., a sum) is performed element by element, what will happen if <span class="hl-yellow"><strong>let‚Äôs add two vectors of different length</strong></span>?</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb118"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb118-1"><a href="#cb118-1"></a>z <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>)</span>
<span id="cb118-2"><a href="#cb118-2"></a>x <span class="sc">+</span> z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  3  7 11  9</code></pre>
</div>
</div>
<p>What it does is <span class="hl-yellow"><strong>recycle elements</strong></span>: if you have a vector of 4 elements and we add another one of 3 elements, it will recycle from the vector with smaller length.</p>
</div>
</section>
<section id="operating-with-vectors-2" class="slide level2">
<h2>Operating with vectors</h2>
<p>A very common operation is to <span class="hl-yellow"><strong>ask data</strong></span> by using <span class="hl-purple"><strong>logical conditions</strong></span>. For example, if we define a vector of temperatures‚Ä¶.</p>
<p><span class="hl-yellow"><strong>What days was it less than 22 degrees</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb120"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb120-1"><a href="#cb120-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">15</span>, <span class="dv">29</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb121"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb121-1"><a href="#cb121-1"></a>x <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE FALSE FALSE  TRUE FALSE</code></pre>
</div>
</div>
<p>It will return a <span class="hl-yellow"><strong>logical vector</strong></span>, depending on whether <strong>each element</strong> fulfills or not the requested condition (of <strong>equal length</strong> to the requested vector).</p>
</div>
<div class="fragment">
<p>If we had a <span class="hl-yellow"><strong>missing data</strong></span> (e.g., due to device error that day), the evaluated condition would also be <code>NA</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb123"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb123-1"><a href="#cb123-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">20</span>, <span class="cn">NA</span>, <span class="dv">31</span>, <span class="dv">27</span>, <span class="dv">7</span>, <span class="dv">29</span>, <span class="dv">10</span>)</span>
<span id="cb123-2"><a href="#cb123-2"></a>y <span class="sc">&lt;</span> <span class="dv">22</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  TRUE  TRUE    NA FALSE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-3" class="slide level2">
<h2>Operating with vectors</h2>
<p>Logical <span class="hl-yellow"><strong>conditions can be combined</strong></span> in two ways:</p>
<ul>
<li><span class="hl-yellow"><strong>Intersection</strong></span>: <span class="hl-purple"><strong>all</strong></span> concatenated conditions must be checked (<span class="hl-purple"><strong>conjunction and</strong></span> with <code>&amp;</code>) to return a <code>TRUE</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb125"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb125-1"><a href="#cb125-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">&amp;</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE  TRUE FALSE  TRUE FALSE  TRUE</code></pre>
</div>
</div>
<ul>
<li><span class="hl-yellow"><strong>Union</strong></span>: it is sufficient that <span class="hl-purple"><strong>at least one</strong></span> is fulfilled (<span class="hl-purple"><strong>conjunction or</strong></span> with <code>|</code>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb127"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb127-1"><a href="#cb127-1"></a>x <span class="sc">&lt;</span> <span class="dv">30</span> <span class="sc">|</span> x <span class="sc">&gt;</span> <span class="dv">15</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE TRUE TRUE TRUE TRUE TRUE</code></pre>
</div>
</div>
<div class="fragment">
<p><code>any()</code> and <code>all()</code> allow us to check that <span class="hl-yellow"><strong>all (or any) elements</strong></span> meet the following criteria</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb129"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb129-1"><a href="#cb129-1"></a><span class="fu">any</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] TRUE</code></pre>
</div>
<div class="sourceCode cell-code" id="cb131"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb131-1"><a href="#cb131-1"></a><span class="fu">all</span>(x <span class="sc">&lt;</span> <span class="dv">30</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] FALSE</code></pre>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-4" class="slide level2">
<h2>Operating with vectors</h2>
<p>We can also use <span class="hl-yellow"><strong>statistical operations</strong></span> such as <code>sum()</code> which, given a vector, returns the sum of all its elements.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb133"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb133-1"><a href="#cb133-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb133-2"><a href="#cb133-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
<p><span class="hl-yellow"><strong>What happens when a single value is missing?</strong></span></p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb135"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb135-1"><a href="#cb135-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">2</span>, <span class="dv">3</span>, <span class="cn">NA</span>, <span class="sc">-</span><span class="dv">1</span>)</span>
<span id="cb135-2"><a href="#cb135-2"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] NA</code></pre>
</div>
</div>
<p>By default, if we have a missing data, the <span class="hl-yellow"><strong>operation will also be missing</strong></span>. In order to <span class="hl-purple"><strong>remove that data</strong></span>, we use an optional argument <code>na.rm = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb137"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb137-1"><a href="#cb137-1"></a><span class="fu">sum</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-5" class="slide level2">
<h2>Operating with vectors</h2>
<p>As we have mentioned, logical values are stored internally as 0 and 1, so we can use them in arithmetic operations.</p>
<p>For example, if we want to <span class="hl-yellow"><strong>find the number of elements that fulfill a condition</strong></span> (for example, ‚Äúless than 3‚Äù), those that do will be assigned a 1 (<code>TRUE</code>) and those that don‚Äôt a 0 (<code>FALSE</code>), so we only need to add this logical vector to obtain the number of elements that fulfill a condition.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb139"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb139-1"><a href="#cb139-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>)</span>
<span id="cb139-2"><a href="#cb139-2"></a><span class="fu">sum</span>(x <span class="sc">&lt;</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 1</code></pre>
</div>
</div>
</section>
<section id="operating-with-vectors-6" class="slide level2">
<h2>Operating with vectors</h2>
<p>Other common operations are <span class="hl-yellow"><strong>average</strong></span>, <span class="hl-yellow"><strong>median</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Average (mean)</strong></span>: centrality measure that consists of adding all the elements and dividing by the number of elements added. The best known but the <span class="hl-red"><strong>least robust</strong></span>: given a set, if outliers (very large or very small values) are introduced, the mean is strongly perturbed.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb141"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb141-1"><a href="#cb141-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="cn">NA</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb141-2"><a href="#cb141-2"></a><span class="fu">mean</span>(x, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 169.8889</code></pre>
</div>
</div>
</section>
<section id="operating-with-vectors-7" class="slide level2">
<h2>Operating with vectors</h2>
<p>Other common operations are <span class="hl-yellow"><strong>average</strong></span>, <span class="hl-yellow"><strong>median</strong></span>, <span class="hl-yellow"><strong>percentiles</strong></span>, etc.</p>
<ul>
<li><span class="hl-yellow"><strong>Median</strong></span>: measure of centrality that consists of ordering the elements and keeping the one that occupies the middle.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb143"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb143-1"><a href="#cb143-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">165</span>, <span class="dv">170</span>, <span class="dv">181</span>, <span class="dv">191</span>, <span class="dv">150</span>, <span class="dv">155</span>, <span class="dv">167</span>, <span class="dv">173</span>, <span class="dv">177</span>)</span>
<span id="cb143-2"><a href="#cb143-2"></a><span class="fu">median</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 170</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Percentiles</strong></span>: measures of location (they divide the data into equal parts).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb145"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb145-1"><a href="#cb145-1"></a><span class="fu">quantile</span>(x) <span class="co"># por defecto percentiles 0-25-50-75-100</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  0%  25%  50%  75% 100% 
 150  165  170  177  191 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb147"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb147-1"><a href="#cb147-1"></a><span class="fu">quantile</span>(x, <span class="at">probs =</span> <span class="fu">c</span>(<span class="fl">0.1</span>, <span class="fl">0.4</span>, <span class="fl">0.9</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  10%   40%   90% 
154.0 167.6 183.0 </code></pre>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-8" class="slide level2">
<h2>Operating with vectors</h2>
<p>Another very common operation is to <span class="hl-yellow"><strong>access elements</strong></span> of it. The simplest way is to use the <code>[i]</code> operator (access the i-th element).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb149"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb149-1"><a href="#cb149-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">20</span>, <span class="dv">30</span>, <span class="dv">33</span>, <span class="cn">NA</span>, <span class="dv">61</span>) </span>
<span id="cb149-2"><a href="#cb149-2"></a>age[<span class="dv">3</span>] <span class="co"># third position</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 33</code></pre>
</div>
</div>
<div class="fragment">
<p>Since a number is just a vector of length one, this operation can also be applied using a <span class="hl-yellow"><strong>vector of indexes to select</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb151"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb151-1"><a href="#cb151-1"></a>y <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Hi"</span>, <span class="st">"how"</span>, <span class="st">"are"</span>, <span class="st">"you"</span>, <span class="st">"?"</span>)</span>
<span id="cb151-2"><a href="#cb151-2"></a>y[<span class="fu">c</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">2</span>, <span class="dv">4</span>)] <span class="co"># first, second and fourth elemento</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hi"  "how" "you"</code></pre>
</div>
</div>
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>To access the last one, without worrying about which one, we can pass as index the length <code>x[length(x)]</code>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-9" class="slide level2">
<h2>Operating with vectors</h2>
<p>Other times we will not want to select but <span class="hl-yellow"><strong>delete some elements</strong></span>. We will have to repeat the same operation but with the sign <code>-</code> in front: the operator <code>[-i]</code> does not select the i-th element of the vector but discards it.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb153"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb153-1"><a href="#cb153-1"></a>y</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hi"  "how" "are" "you" "?"  </code></pre>
</div>
<div class="sourceCode cell-code" id="cb155"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb155-1"><a href="#cb155-1"></a>y[<span class="sc">-</span><span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "Hi"  "are" "you" "?"  </code></pre>
</div>
</div>
<div class="fragment">
<p>Many times we will want to <span class="hl-yellow"><strong>select or eliminate based on logical conditions</strong></span>, depending on the values, so we will pass as index the condition itself (remember, <code>x &lt; 2</code> returns a logical vector).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb157"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb157-1"><a href="#cb157-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">15</span>, <span class="dv">21</span>, <span class="dv">30</span>, <span class="dv">17</span>, <span class="dv">45</span>)</span>
<span id="cb157-2"><a href="#cb157-2"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"mar√≠a"</span>, <span class="st">"laura"</span>, <span class="st">"carla"</span>, <span class="st">"luis"</span>)</span>
<span id="cb157-3"><a href="#cb157-3"></a>names[age <span class="sc">&lt;</span> <span class="dv">18</span>] </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "carla"</code></pre>
</div>
</div>
</div>
</section>
<section id="operating-with-vectors-10" class="slide level2">
<h2>Operating with vectors</h2>
<p>Finally, a common action is to <span class="hl-yellow"><strong>sort values</strong></span>:</p>
<ul>
<li><code>sort()</code>: returns the <span class="hl-yellow"><strong>sorted vector</strong></span>. By default from smallest to largest but with <code>decreasing = TRUE</code> we can change it.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb159"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb159-1"><a href="#cb159-1"></a>age <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">81</span>, <span class="dv">7</span>, <span class="dv">25</span>, <span class="dv">41</span>, <span class="dv">65</span>, <span class="dv">20</span>, <span class="dv">33</span>, <span class="dv">23</span>, <span class="dv">77</span>)</span>
<span id="cb159-2"><a href="#cb159-2"></a><span class="fu">sort</span>(age)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1]  7 20 23 25 33 41 65 77 81</code></pre>
</div>
<div class="sourceCode cell-code" id="cb161"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb161-1"><a href="#cb161-1"></a><span class="fu">sort</span>(age, <span class="at">decreasing =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 81 77 65 41 33 25 23 20  7</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>order()</code>: returns the <span class="hl-yellow"><strong>index vector</strong></span> that we would have to use to have the sorted vector.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb163"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb163-1"><a href="#cb163-1"></a><span class="fu">order</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 5 6 1 7 2 8 9 3 4</code></pre>
</div>
<div class="sourceCode cell-code" id="cb165"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb165-1"><a href="#cb165-1"></a>x[<span class="fu">order</span>(x)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 150 155 165 167 170 173 177 181 191</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-1a" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-3" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-3-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-3-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-3-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-3-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li><li><a href="#tabset-3-5"><span class="hl-yellow"><strong>Exercise 5</strong></span></a></li><li><a href="#tabset-3-6"><span class="hl-yellow"><strong>Exercise 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-3-1">
<p>üìù Define the vector <code>x</code> as the concatenation of the first 5 odd numbers, and calculate their sum.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb167"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb167-1"><a href="#cb167-1"></a><span class="co"># Two ways</span></span>
<span id="cb167-2"><a href="#cb167-2"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>, <span class="dv">5</span>, <span class="dv">7</span>, <span class="dv">9</span>)</span>
<span id="cb167-3"><a href="#cb167-3"></a>x <span class="ot">&lt;-</span> <span class="fu">seq</span>(<span class="dv">1</span>, <span class="dv">9</span>, <span class="at">by =</span> <span class="dv">2</span>)</span>
<span id="cb167-4"><a href="#cb167-4"></a></span>
<span id="cb167-5"><a href="#cb167-5"></a><span class="fu">sum</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-2">
<p>üìù Get the elements of <code>x</code> greater than 4. Calculate the number of elements of <code>x</code> greater than 4.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb168"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb168-1"><a href="#cb168-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">4</span>]</span>
<span id="cb168-2"><a href="#cb168-2"></a><span class="fu">sum</span>(x <span class="sc">&gt;</span> <span class="dv">4</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-3">
<p>üìù Calculate the vector <code>1/x</code> and obtain the ordered version (from smallest to largest).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb169"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb169-1"><a href="#cb169-1"></a>z <span class="ot">&lt;-</span> <span class="dv">1</span><span class="sc">/</span>x</span>
<span id="cb169-2"><a href="#cb169-2"></a><span class="fu">sort</span>(z)</span>
<span id="cb169-3"><a href="#cb169-3"></a>z[<span class="fu">order</span>(z)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-4">
<p>üìù Find the maximum and minimum of vector <code>x</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb170"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb170-1"><a href="#cb170-1"></a><span class="fu">min</span>(x)</span>
<span id="cb170-2"><a href="#cb170-2"></a><span class="fu">max</span>(x)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-5">
<p>üìù Find of the vector <code>x</code> the elements greater (strictly) than 1 and less (strictly) than 7. Find a way to find out if all the elements are positive or not.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb171"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb171-1"><a href="#cb171-1"></a>x[x <span class="sc">&gt;</span> <span class="dv">1</span> <span class="sc">&amp;</span> x <span class="sc">&lt;</span> <span class="dv">7</span>]</span>
<span id="cb171-2"><a href="#cb171-2"></a><span class="fu">all</span>(x <span class="sc">&gt;</span> <span class="dv">0</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-3-6">
<p>üìù Given the vector <code>x &lt;- c(1, -5, 8, NA, 10, -3, 9)</code>, extract the elements that occupy the places 1, 2, 5, 6. Removes from the vector the second element. After removing it, compute its sum and mean</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb172"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb172-1"><a href="#cb172-1"></a>x <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">1</span>, <span class="sc">-</span><span class="dv">5</span>, <span class="dv">8</span>, <span class="cn">NA</span>, <span class="dv">10</span>, <span class="sc">-</span><span class="dv">3</span>, <span class="dv">9</span>)</span>
<span id="cb172-2"><a href="#cb172-2"></a>x[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">2</span>, <span class="dv">5</span>, <span class="dv">6</span>)]</span>
<span id="cb172-3"><a href="#cb172-3"></a>y <span class="ot">&lt;-</span> x[<span class="sc">-</span><span class="dv">2</span>]</span>
<span id="cb172-4"><a href="#cb172-4"></a><span class="fu">sum</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span>
<span id="cb172-5"><a href="#cb172-5"></a><span class="fu">mean</span>(y, <span class="at">na.rm =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-pr√°ctico-1" class="slide level2">
<h2>üê£ Case study</h2>
<p>In the <code>{datasets}</code> package we have several datasets, and one of them is named as <code>airquality</code>. I have extracted below 3 variables from this dataset</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb173"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb173-1"><a href="#cb173-1"></a>temperature <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Temp</span>
<span id="cb173-2"><a href="#cb173-2"></a>month <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Month</span>
<span id="cb173-3"><a href="#cb173-3"></a>day <span class="ot">&lt;-</span> airquality<span class="sc">$</span>Day</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>What <span class="hl-yellow"><strong>represents the data</strong></span>? How to find out?</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>How many <span class="hl-yellow"><strong>records do we have for May</strong></span>? What about April? Construct a new <code>date</code> variable with the <span class="hl-yellow"><strong>date</strong></span> of each record (combining year, month and day).</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Create a new variable <code>temp_celsius</code> with the <span class="hl-yellow"><strong>temperature in ¬∫C</strong></span> (units of the original variable are in Fahrenheit)</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>What was the <span class="hl-yellow"><strong>average temperature</strong></span> for the month of August? Extract the days when the <span class="hl-yellow"><strong>temperature exceeded 30 degrees</strong></span> and determine the number of days when it did.</li>
</ol>
</div>
</section></section>
<section>
<section id="clase-2" class="title-slide slide level1 center">
<h1>Lesson 2: first databases</h1>
<p><span style="color:#444442;"><strong>First databases: tibbles as standard type for databases. R base vs tidyverse. Pipe operator. Principles of tidy data: tidy vs messy data. Pivoting datasets</strong></span></p>
</section>
<section id="first-attempt-matrices" class="slide level2">
<h2>First attempt: matrices</h2>
<p>In data science we usually have <span class="hl-yellow"><strong>several variables</strong></span> for each individual: we need a ‚Äútable‚Äù to collect them. The most immediate option is <span class="hl-yellow"><strong>matrices</strong></span>: a concatenation of variables of <span class="hl-purple"><strong>same type and equal length</strong></span>.</p>
<div class="fragment">
<p>Let us imagine that we have heights and weights of 4 people. How to <span class="hl-yellow"><strong>create a dataset with those variables</strong></span>?</p>
<ul>
<li>Function <code>cbind()</code> allow us to <span class="hl-yellow"><strong>concatenate vectors by columns</strong></span></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb174"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb174-1"><a href="#cb174-1"></a>heights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">150</span>, <span class="dv">160</span>, <span class="dv">170</span>, <span class="dv">180</span>)</span>
<span id="cb174-2"><a href="#cb174-2"></a>weights <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">63</span>, <span class="dv">70</span>, <span class="dv">85</span>, <span class="dv">95</span>)</span>
<span id="cb174-3"><a href="#cb174-3"></a>data_matrix <span class="ot">&lt;-</span> <span class="fu">cbind</span>(heights, weights)</span>
<span id="cb174-4"><a href="#cb174-4"></a>data_matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     heights weights
[1,]     150      63
[2,]     160      70
[3,]     170      85
[4,]     180      95</code></pre>
</div>
</div>
</div>
</section>
<section id="first-attempt-matrices-1" class="slide level2">
<h2>First attempt: matrices</h2>
<ul>
<li>We can also <span class="hl-yellow"><strong>define a matrix by rows</strong></span> with the <code>rbind()</code> function (although it is recommended to have each variable in column and individuals in row).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb176"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb176-1"><a href="#cb176-1"></a><span class="fu">rbind</span>(heights, weights)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        [,1] [,2] [,3] [,4]
heights  150  160  170  180
weights   63   70   85   95</code></pre>
</div>
</div>
<ul>
<li>We can <span class="hl-yellow"><strong>view the matrix</strong></span> (in a tabular way) using the function <code>View()</code>.</li>
</ul>
<div class="fragment">
<ul>
<li>We can <span class="hl-yellow"><strong>check dimensions</strong></span> with <code>dim()</code>, <code>nrow()</code> and <code>ncol()</code> (data is now tabulated).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb178"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb178-1"><a href="#cb178-1"></a><span class="fu">dim</span>(data_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4 2</code></pre>
</div>
<div class="sourceCode cell-code" id="cb180"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb180-1"><a href="#cb180-1"></a><span class="fu">nrow</span>(data_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4</code></pre>
</div>
</div>
</div>
</section>
<section id="first-attempt-matrices-2" class="slide level2">
<h2>First attempt: matrices</h2>
<ul>
<li>We can also <span class="hl-yellow"><strong>transpose a matrix</strong></span> with <code>t()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb182"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb182-1"><a href="#cb182-1"></a><span class="fu">t</span>(data_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>        [,1] [,2] [,3] [,4]
heights  150  160  170  180
weights   63   70   85   95</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li>Since we now have two dimensions, to <span class="hl-yellow"><strong>access elements</strong></span> we must provide the index of the row and column inside of brackets (if they are free, it implies all of that dimension)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb184"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb184-1"><a href="#cb184-1"></a>data_matrix[<span class="dv">2</span>, <span class="dv">1</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>heights 
    160 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb186"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb186-1"><a href="#cb186-1"></a>data_matrix[, <span class="dv">2</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 63 70 85 95</code></pre>
</div>
</div>
</div>
</section>
<section id="first-attempt-matrices-3" class="slide level2">
<h2>First attempt: matrices</h2>
<ul>
<li>We can also define a <span class="hl-yellow"><strong>matrix from a numeric vector</strong></span>, reorganizing the values in the form of a matrix (knowing that the elements are <strong>placed by columns</strong>).</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb188"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb188-1"><a href="#cb188-1"></a>z <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">15</span>, <span class="at">ncol =</span> <span class="dv">5</span>) </span>
<span id="cb188-2"><a href="#cb188-2"></a>z</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]    1    4    7   10   13
[2,]    2    5    8   11   14
[3,]    3    6    9   12   15</code></pre>
</div>
</div>
<div class="fragment">
<p>With matrices it is the same as with vectors: when we apply an <span class="hl-yellow"><strong>arithmetic operation, we do it element by element</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb190"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb190-1"><a href="#cb190-1"></a>z<span class="sc">/</span><span class="dv">5</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     [,1] [,2] [,3] [,4] [,5]
[1,]  0.2  0.8  1.4  2.0  2.6
[2,]  0.4  1.0  1.6  2.2  2.8
[3,]  0.6  1.2  1.8  2.4  3.0</code></pre>
</div>
</div>
</div>
</section>
<section id="first-attempt-matrices-4" class="slide level2">
<h2>First attempt: matrices</h2>
<p>We can also apply <span class="hl-yellow"><strong>apply functions by columns/rows</strong></span> (avoiding loops) with <code>apply()</code>, taking as <strong>input arguments</strong></p>
<ul>
<li>a matrix</li>
<li>the sense (<code>MARGIN = 1</code> by rows, <code>MARGIN = 2</code> by columns)</li>
<li>a function to be applied.</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb192"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb192-1"><a href="#cb192-1"></a><span class="co"># Mean by columns (MARGIN = 2)</span></span>
<span id="cb192-2"><a href="#cb192-2"></a><span class="fu">apply</span>(data_matrix, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>heights weights 
 165.00   78.25 </code></pre>
</div>
<div class="sourceCode cell-code" id="cb194"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb194-1"><a href="#cb194-1"></a><span class="co"># (Quasi)var (var) by columns (MARGIN = 2)</span></span>
<span id="cb194-2"><a href="#cb194-2"></a><span class="fu">apply</span>(data_matrix, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"var"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> heights  weights 
166.6667 208.9167 </code></pre>
</div>
</div>
</div>
<div class="fragment">
<p><span class="hl-red"><strong>We won‚Äôt go deeper</strong></span> any further since our goal is to have variables of the same length but <span class="hl-yellow"><strong>different types</strong></span> (but know they exist).</p>
</div>
</section>
<section id="tu-turno-matrices" class="slide level2">
<h2>üíª Your turn (matrices)</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-4" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-4-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-4-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-4-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-4-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-4-1">
<p>üìù Modify the code below to define an <code>x</code> matrix of ones with 3 rows and 7 columns.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb196"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb196-1"><a href="#cb196-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">0</span>, <span class="at">nrow =</span> <span class="dv">2</span>, <span class="at">ncol =</span> <span class="dv">3</span>)</span>
<span id="cb196-2"><a href="#cb196-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb197"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb197-1"><a href="#cb197-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span>, <span class="at">nrow =</span> <span class="dv">3</span>, <span class="at">ncol =</span> <span class="dv">7</span>)</span>
<span id="cb197-2"><a href="#cb197-2"></a>x</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-2">
<p>üìù Add a 1 to each number in the matrix above, and divide the result by 5. After that, calculate its transpose and obtain its dimensions</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb198"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb198-1"><a href="#cb198-1"></a>new_matrix <span class="ot">&lt;-</span> (x <span class="sc">+</span> <span class="dv">1</span>)<span class="sc">/</span><span class="dv">5</span></span>
<span id="cb198-2"><a href="#cb198-2"></a><span class="fu">t</span>(new_matrix)</span>
<span id="cb198-3"><a href="#cb198-3"></a><span class="fu">dim</span>(new_matrix)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-3">
<p>üìù Define matrix <code>x &lt;- matrix(1:12, nrow = 4)</code>. Get the first row, the third column, and the element (4, 1).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb199"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb199-1"><a href="#cb199-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb199-2"><a href="#cb199-2"></a>x[<span class="dv">1</span>, ] <span class="co"># first row</span></span>
<span id="cb199-3"><a href="#cb199-3"></a>x[, <span class="dv">3</span>] <span class="co"># third column</span></span>
<span id="cb199-4"><a href="#cb199-4"></a>x[<span class="dv">4</span>, <span class="dv">1</span>] <span class="co"># element (4, 1)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-4-4">
<p>üìù With the above matrix defined as <code>x &lt;- matrix(1:12, nrow = 4)</code>, calculate the mean of all elements, the mean of each row and the mean of each column. Calculate the sum of each row and each column.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb200"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb200-1"><a href="#cb200-1"></a>x <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>, <span class="at">nrow =</span> <span class="dv">4</span>)</span>
<span id="cb200-2"><a href="#cb200-2"></a><span class="fu">mean</span>(x) <span class="co"># mean (of all elements)</span></span>
<span id="cb200-3"><a href="#cb200-3"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>) <span class="co"># mean by rows</span></span>
<span id="cb200-4"><a href="#cb200-4"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"mean"</span>) <span class="co"># mean by columns</span></span>
<span id="cb200-5"><a href="#cb200-5"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">1</span>, <span class="at">FUN =</span> <span class="st">"sum"</span>) <span class="co"># sum by rows</span></span>
<span id="cb200-6"><a href="#cb200-6"></a><span class="fu">apply</span>(x, <span class="at">MARGIN =</span> <span class="dv">2</span>, <span class="at">FUN =</span> <span class="st">"sum"</span>) <span class="co"># sum by columns</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="second-attempt-data.frame" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p>Matrices have the same problem as vectors: if we collect data of different types together, <span class="hl-red"><strong>data integrity is compromised</strong></span> as it converts them into.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb201" data-code-line-numbers="4-5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb201-1"><a href="#cb201-1"></a>ages <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">14</span>, <span class="dv">24</span>, <span class="cn">NA</span>)</span>
<span id="cb201-2"><a href="#cb201-2"></a>single <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="cn">TRUE</span>, <span class="cn">NA</span>, <span class="cn">FALSE</span>)</span>
<span id="cb201-3"><a href="#cb201-3"></a>names <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>, <span class="st">"luc√≠a"</span>)</span>
<span id="cb201-4"><a href="#cb201-4"></a>matrix <span class="ot">&lt;-</span> <span class="fu">cbind</span>(ages, single, names)</span>
<span id="cb201-5"><a href="#cb201-5"></a>matrix</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>     ages single  names  
[1,] "14" "TRUE"  "javi" 
[2,] "24" NA      "laura"
[3,] NA   "FALSE" "luc√≠a"</code></pre>
</div>
</div>
<div class="fragment">
<p>Since we are no longer numbers, we cannot perform arithmetic operations.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb203"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb203-1"><a href="#cb203-1"></a>matrix <span class="sc">+</span> <span class="dv">1</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in matrix + 1: non-numeric argument to binary operator</code></pre>
</div>
</div>
</div>
</section>
<section id="second-attempt-data.frame-1" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p>In order to work with <span class="hl-yellow"><strong>variables of different type</strong></span> we have what is known as <span class="hl-yellow"><strong>data.frame</strong></span>: concatenation of variables of equal length but may be of <span class="hl-purple"><strong>different type</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb205" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb205-1"><a href="#cb205-1"></a>table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ages, single, names)</span>
<span id="cb205-2"><a href="#cb205-2"></a><span class="fu">class</span>(table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "data.frame"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb207" data-code-line-numbers="1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb207-1"><a href="#cb207-1"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ages single names
1   14   TRUE  javi
2   24     NA laura
3   NA  FALSE luc√≠a</code></pre>
</div>
</div>
</section>
<section id="second-attempt-data.frame-2" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p>Since a <code>data.frame</code> is already a <code>database</code> the variables are not mere mathematical vectors: <span class="hl-yellow"><strong>they have a meaning</strong></span> and we can (must) <span class="hl-purple"><strong>name them</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb209"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb209-1"><a href="#cb209-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb209-2"><a href="#cb209-2"></a>table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="st">"ags"</span> <span class="ot">=</span> ages, <span class="st">"single"</span> <span class="ot">=</span> single, <span class="st">"name"</span> <span class="ot">=</span> names,</span>
<span id="cb209-3"><a href="#cb209-3"></a>             <span class="st">"b_date"</span> <span class="ot">=</span> <span class="fu">as_date</span>(<span class="fu">c</span>(<span class="st">"1989-09-10"</span>, <span class="st">"1992-04-01"</span>, <span class="st">"1980-11-27"</span>)))</span>
<span id="cb209-4"><a href="#cb209-4"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ags single  name     b_date
1  14   TRUE  javi 1989-09-10
2  24     NA laura 1992-04-01
3  NA  FALSE luc√≠a 1980-11-27</code></pre>
</div>
</div>
</section>
<section id="second-attempt-data.frame-3" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p><span class="hl-yellow"><strong>We have our first dataset!</strong></span> You can view it by typing its name in the console or with <code>View(table)</code>.</p>

<img data-src="img/view_tabla.jpg" class="r-stretch"></section>
<section id="second-attempt-data.frame-4" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p>If we want to access its elements, we can, as in matrices (although it is not recommended): now <span class="hl-yellow"><strong>we have two indexes</strong></span> (rows and columns, leaving free the one we don‚Äôt use)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb211"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb211-1"><a href="#cb211-1"></a>table[<span class="dv">2</span>, ]  <span class="co"># second row (all variables)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ags single  name     b_date
2  24     NA laura 1992-04-01</code></pre>
</div>
<div class="sourceCode cell-code" id="cb213"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb213-1"><a href="#cb213-1"></a>table[, <span class="dv">3</span>]  <span class="co"># third column (all individuals)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "laura" "luc√≠a"</code></pre>
</div>
<div class="sourceCode cell-code" id="cb215"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb215-1"><a href="#cb215-1"></a>table[<span class="dv">2</span>, <span class="dv">1</span>]  <span class="co"># first variable for the second individual</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 24</code></pre>
</div>
</div>
<div class="fragment">
<div class="columns">
<div class="column" style="width:25%;">
<p><img data-src="img/menu_data_frame.jpg"></p>
</div><div class="column" style="width:75%;">
<p>It also has advantages of a <span class="hl-yellow"><strong>database</strong></span> : we can <span class="hl-purple"><strong>access variables by name</strong></span> (<strong>recommendable</strong> since variables can change position), putting the name of the table followed by the symbol <code>$</code> (with the <strong>tab</strong>, a menu of columns to choose from will appear).</p>
</div>
</div>
</div>
</section>
<section id="second-attempt-data.frame-5" class="slide level2">
<h2>Second attempt: data.frame</h2>
<ul>
<li><code>names()</code>: show us the names of the variables.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb217"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb217-1"><a href="#cb217-1"></a><span class="fu">names</span>(table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "ags"    "single" "name"   "b_date"</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><code>dim()</code>: show us the dimensions (see also <code>nrow()</code> and <code>ncol()</code>)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb219"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb219-1"><a href="#cb219-1"></a><span class="fu">dim</span>(table)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 3 4</code></pre>
</div>
</div>
</div>
<div class="fragment">
<ul>
<li>We can access to variables by name</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb221"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb221-1"><a href="#cb221-1"></a>table[<span class="fu">c</span>(<span class="dv">1</span>, <span class="dv">3</span>), <span class="st">"name"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] "javi"  "luc√≠a"</code></pre>
</div>
</div>
</div>
</section>
<section id="second-attempt-data.frame-6" class="slide level2">
<h2>Second attempt: data.frame</h2>
<p>If we have one already created and we want to <span class="hl-yellow"><strong>add a column</strong></span> it is as simple as using the <code>data.frame()</code> function we have already seen to concatenate the column. Let‚Äôs add for example a new variable, the number of siblings of each individual.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb223"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb223-1"><a href="#cb223-1"></a><span class="co"># Add new column</span></span>
<span id="cb223-2"><a href="#cb223-2"></a>siblings <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">3</span>)</span>
<span id="cb223-3"><a href="#cb223-3"></a>table <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(table, <span class="st">"n_sib"</span> <span class="ot">=</span> siblings)</span>
<span id="cb223-4"><a href="#cb223-4"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>  ags single  name     b_date n_sib
1  14   TRUE  javi 1989-09-10     0
2  24     NA laura 1992-04-01     2
3  NA  FALSE luc√≠a 1980-11-27     3</code></pre>
</div>
</div>
</section>
<section id="final-attempt-tibble" class="slide level2">
<h2>Final attempt: tibble</h2>
<p>Tables in <code>data.frame</code> format have some <span class="hl-red"><strong>limitations</strong></span></p>
<p>The main one is that <span class="hl-red"><strong>does not allow recursion</strong></span>: imagine we define a database with heights and weights, and we want a third variable with BMI.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb225"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb225-1"><a href="#cb225-1"></a><span class="fu">data.frame</span>(<span class="st">"height"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"weight"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb225-2"><a href="#cb225-2"></a>           <span class="st">"BMI"</span> <span class="ot">=</span> weight <span class="sc">/</span> (height<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-error">
<pre><code>Error in data.frame(height = c(1.7, 1.8, 1.6), weight = c(80, 75, 70), : object 'weight' not found</code></pre>
</div>
</div>
<div class="fragment">
<p>From now on we will use the <code>tibble</code> format (an <span class="hl-yellow"><strong>enhanced data.frame</strong></span>).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb227"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb227-1"><a href="#cb227-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb227-2"><a href="#cb227-2"></a><span class="fu">tibble</span>(<span class="st">"height"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"weight"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb227-3"><a href="#cb227-3"></a>       <span class="st">"BMI"</span> <span class="ot">=</span> weight <span class="sc">/</span> (height<span class="sc">^</span><span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  height weight   BMI
   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1    1.7     80  27.7
2    1.8     75  23.1
3    1.6     70  27.3</code></pre>
</div>
</div>
</div>
</section>
<section id="final-attempt-tibble-1" class="slide level2">
<h2>Final attempt: tibble</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb229"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb229-1"><a href="#cb229-1"></a>table <span class="ot">&lt;-</span> <span class="fu">tibble</span>(<span class="st">"height"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="fl">1.7</span>, <span class="fl">1.8</span>, <span class="fl">1.6</span>), <span class="st">"weight"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">80</span>, <span class="dv">75</span>, <span class="dv">70</span>),</span>
<span id="cb229-2"><a href="#cb229-2"></a>                <span class="st">"BMI"</span> <span class="ot">=</span> weight <span class="sc">/</span> (height<span class="sc">^</span><span class="dv">2</span>))</span>
<span id="cb229-3"><a href="#cb229-3"></a>table</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  height weight   BMI
   &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt;
1    1.7     80  27.7
2    1.8     75  23.1
3    1.6     70  27.3</code></pre>
</div>
</div>
<p>Tables in <code>tibble</code> format will allow a <span class="hl-yellow"><strong>more agile, efficient and coherent</strong></span> data management, with 4 main advantages:</p>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Metainfo</strong></span>: if you look at the header, it automatically tells us the number of rows and columns, and the type of each variable.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>Recursivity</strong></span>: allows you to define the variables sequentially (as we have seen).</li>
</ul>
</div>
</section>
<section id="final-attempt-tibble-2" class="slide level2">
<h2>Final attempt: tibble</h2>
<ul>
<li><span class="hl-yellow"><strong>Consistency</strong></span>: if you access a column that does not exist, a warning message is issued.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb231"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb231-1"><a href="#cb231-1"></a>table<span class="sc">$</span>invent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stderr">
<pre><code>Warning: Unknown or uninitialised column: `invent`.</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>NULL</code></pre>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-yellow"><strong>By rows</strong></span>: create by rows (copy and paste from a table) with <code>tribble()</code>.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb234"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb234-1"><a href="#cb234-1"></a><span class="fu">tribble</span>(<span class="sc">~</span>colA, <span class="sc">~</span>colB,</span>
<span id="cb234-2"><a href="#cb234-2"></a>        <span class="st">"a"</span>,   <span class="dv">1</span>,</span>
<span id="cb234-3"><a href="#cb234-3"></a>        <span class="st">"b"</span>,   <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  colA   colB
  &lt;chr&gt; &lt;dbl&gt;
1 a         1
2 b         2</code></pre>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Tip</strong></p>
</div>
<div class="callout-content">
<p>The <code>{datapasta}</code> package allows us to <span class="hl-green"><strong>copy and paste</strong></span> tables from web pages and simple documents.</p>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-tibble" class="slide level2">
<h2>üíª Your turn (tibble)</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-5" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-5-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-5-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-5-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-5-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li><li><a href="#tabset-5-5"><span class="hl-yellow"><strong>Exercise 5</strong></span></a></li><li><a href="#tabset-5-6"><span class="hl-yellow"><strong>Exercise 6</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-5-1">
<p>üìù Load from the <code>{datasets}</code> package the <code>airquality</code> dataset (New York air quality variables from May through September 1973). Is the airquality dataset of type tibble? If not, convert it to tibble (look in the package documentation at <a href="https://tibble.tidyverse.org/index.html" class="uri">https://tibble.tidyverse.org/index.html</a>).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb236"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb236-1"><a href="#cb236-1"></a><span class="fu">library</span>(tibble)</span>
<span id="cb236-2"><a href="#cb236-2"></a><span class="fu">class</span>(datasets<span class="sc">::</span>airquality)</span>
<span id="cb236-3"><a href="#cb236-3"></a>airquality_tb <span class="ot">&lt;-</span> <span class="fu">as_tibble</span>(datasets<span class="sc">::</span>airquality)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-2">
<p>üìù Once converted into <code>tibble</code> get the name of the variables and the dimensions of the data set. How many variables are there? How many days have been measured?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb237"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb237-1"><a href="#cb237-1"></a><span class="fu">names</span>(airquality_tb)</span>
<span id="cb237-2"><a href="#cb237-2"></a><span class="fu">ncol</span>(airquality_tb)</span>
<span id="cb237-3"><a href="#cb237-3"></a><span class="fu">nrow</span>(airquality_tb)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-3">
<p>üìù Filters only data for the month of August.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb238"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb238-1"><a href="#cb238-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-4">
<p>üìù Select those data that are not from July or August.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb239"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb239-1"><a href="#cb239-1"></a>airquality_tb[<span class="sc">!</span>(airquality_tb<span class="sc">$</span>Month <span class="sc">%in%</span> <span class="fu">c</span>(<span class="dv">7</span>, <span class="dv">8</span>)), ]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-5">
<p>üìù Modify the following code to keep only the ozone and temperature variables.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb240"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb240-1"><a href="#cb240-1"></a>airquality_tb[, <span class="fu">c</span>(<span class="st">"Ozone"</span>, <span class="st">"Temp"</span>)]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-5-6">
<p>üìù Select the temperature and wind data for August. Translate the name of the columns of the filtered set to your motherlanguage.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb241"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb241-1"><a href="#cb241-1"></a>airquality_tb[airquality_tb<span class="sc">$</span>Month <span class="sc">==</span> <span class="dv">8</span>, <span class="fu">c</span>(<span class="st">"Temp"</span>, <span class="st">"Wind"</span>)]</span>
<span id="cb241-2"><a href="#cb241-2"></a><span class="fu">names</span>(airquality_tb) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"ozono"</span>, <span class="st">"rad_solar"</span>, <span class="st">"viento"</span>, <span class="st">"temp"</span>, <span class="st">"mes"</span>, <span class="st">"dia"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="summary" class="slide level2">
<h2>Summary</h2>
<ul>
<li>Each <span class="hl-yellow"><strong>cell can be of a different type</strong></span>: numbers, text, dates, logical values, etc.</li>
</ul>
<div class="fragment">
<ul>
<li>A <span class="hl-yellow"><strong>vector is a concatenation of cells</strong></span> (columns of our tables) ‚Äì&gt; In <code>R</code> by default the operations are done <span class="hl-yellow"><strong>element by element</strong></span></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>A <span class="hl-yellow"><strong>matrix</strong></span> allows us to concatenate <span class="hl-yellow"><strong>variables of the SAME type and SAME length</strong></span> ‚Äì&gt; two-dimensional object (two indices)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li>A <span class="hl-yellow"><strong>data.frame</strong></span> allows us to concatenate <span class="hl-yellow"><strong>variables of DIFFERENT type and SAME length</strong></span> ‚Äì&gt; we will use <span class="hl-yellow"><strong>tibble</strong></span> as an enhanced database option.</li>
</ul>
</div>
</section>
<section id="caso-pr√°ctico-2" class="slide level2">
<h2>üê£ Case study</h2>
<p>From the <code>{Biostatistics}</code> package we will use the <code>pinniped</code> data set.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb242"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb242-1"><a href="#cb242-1"></a>Biostatistics<span class="sc">::</span>pinniped</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>What <span class="hl-yellow"><strong>data type</strong></span> does the data represent? What <span class="hl-yellow"><strong>data type</strong></span> is it? If not, convert the database to a <code>tibble</code> (rename with <code>pinniped_tb</code>).</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>How many records are there, and variables, what type is each one?</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Incorporate an <span class="hl-yellow"><strong>extra variable named phoca</strong></span> that is of logical type and check whether a species is of category <code>Phoca</code> or not.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li>Which sex is <span class="hl-yellow"><strong>weighted more by brain</strong></span>: females or males? Who is <span class="hl-yellow"><strong>weighted more by body</strong></span>: monogamous or polygamous?</li>
</ol>
</div>
<div class="fragment">
<ol start="5" type="1">
<li>Add a new variable representing the <span class="hl-yellow"><strong>difference in brain weight between males and females</strong></span> (males - females) for each species.</li>
</ol>
</div>
</section>
<section id="r-base-vs-tidyverse" class="slide level2">
<h2>R base vs Tidyverse</h2>
<p>If you know any other programming language, you will be surprised that we have not yet talked about common concepts such as</p>
<ul>
<li><p><span class="hl-yellow"><strong>For loops</strong></span>: repeat a code a fixed number of iterations.</p></li>
<li><p><span class="hl-yellow"><strong>while loops</strong></span>: repeat a code until a condition is verified.</p></li>
<li><p><span class="hl-yellow"><strong>if-else structures</strong></span>: control flow structures to decide where the code walks depending on the value of variables.</p></li>
</ul>
<div class="fragment">
<p>And although knowing these structures can be interesting at some point, in <span class="hl-red"><strong>most of the times we will be able to avoid them</strong></span> (specially loops).</p>
</div>
</section>
<section id="what-about-tidyverse" class="slide level2">
<h2>What about tidyverse?</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/flow_tidyverse.jpg"></p>
</div>
</div>
<p><code>{tidyverse}</code> is an <span class="hl-yellow"><strong>‚Äúuniverse‚Äù of packages</strong></span> to ensure an efficient, coherent and lexicographically simple to understand workflow based on the idea that <span class="hl-purple"><strong>our data is clean and tidy</strong></span></p>
</section>
<section id="what-about-tidyverse-1" class="slide level2">
<h2>What about tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: optimizing data.frame</li>
<li><code>{tidyr}</code>: data cleaning</li>
<li><code>{readr}</code>: loading rectangular data (.csv)</li>
<li><code>{dplyr}</code>: grammar for debugging</li>
<li><code>{stringr}</code>: text handling</li>
<li><code>{ggplot2}</code>: data visualization</li>
<li><code>{tidymodels}</code>: modeling/prediction</li>
</ul>
</div>
</div>
<p>We also have the <code>{purrr}</code> packages for list management, <code>{forcast}</code> for qualitative variables, <code>{lubridate}</code> for dates, <code>{readxl}</code> for importing .xls and .xlsx files, <code>{rvest}</code> for web scraping and <code>{rmarkdown}</code> for reporting results.</p>
</section>
<section id="what-about-tidyverse-2" class="slide level2">
<h2>What about tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizing data.frame</strong></span></li>
<li><code>{tidyr}</code>: <span class="hl-yellow"><strong>data cleaning</strong></span></li>
<li><code>{readr}</code>: loading rectangular data (.csv)</li>
<li><code>{dplyr}</code>: grammar for debugging</li>
<li><code>{stringr}</code>: text handling</li>
<li><code>{ggplot2}</code>: data visualization</li>
<li><code>{tidymodels}</code>: modeling/prediction</li>
</ul>
</div>
</div>
<p>We also have the <code>{purrr}</code> packages for list management, <code>{forcast}</code> for qualitative variables, <code>{lubridate}</code> for dates, <code>{readxl}</code> for importing .xls and .xlsx files, <code>{rvest}</code> for web scraping and <code>{rmarkdown}</code> for reporting results.</p>
</section>
<section id="idea-tidy-data" class="slide level2">
<h2>Idea: Tidy Data</h2>
<blockquote>
<p>Tidy datasets are all alike, but every messy dataset is messy in its own way (Hadley Wickham, Chief Scientist en RStudio)</p>
</blockquote>
<div style="font-size:120px; text-align: center; color:#F8DF58;">
<p><b>TIDY</b><b><span style="color:#CAB0EE;">VERSE</span></b></p>
</div>
<p>The <span class="hl-purple"><strong>universe</strong></span> of <code>{tidyverse}</code> packages is based on the idea introduced by <strong>Hadley Wickham</strong> (the God I pray to) of <span class="hl-yellow"><strong>standardize</strong></span> formatting data to</p>
<div>
<ul>
<li class="fragment"><span class="hl-green"><strong>systematize</strong></span> debugging</li>
<li class="fragment">make it <span class="hl-green"><strong>simpler</strong></span> to manipulate.</li>
<li class="fragment"><span class="hl-green"><strong>readable</strong></span> code.</li>
</ul>
</div>
</section>
<section id="tidy-data-rules" class="slide level2">
<h2>Tidy data: rules</h2>
<p>The first thing will therefore be to understand what the <span class="hl-yellow"><strong>tidydata sets</strong></span> are, since the whole <code>{tidyverse}</code> is based on the data being standardized.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="fragment fade-in">
<ol type="1">
<li>Each <span class="hl-yellow"><strong>variable</strong></span> in a <span class="hl-purple"><strong>single column</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="2" type="1">
<li>Each <span class="hl-yellow"><strong>individual</strong></span> in a <span class="hl-purple"><strong>different row</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="3" type="1">
<li>Each <span class="hl-yellow"><strong>cell</strong></span> with a <span class="hl-purple"><strong>single value</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="4" type="1">
<li>Each <span class="hl-yellow"><strong>dataset</strong></span> in a <span class="hl-purple"><strong>tibble</strong></span></li>
</ol>
</div>
<div class="fragment fade-in">
<ol start="5" type="1">
<li>If we want to cross <span class="hl-yellow"><strong>multiple tables</strong></span> we must have a <span class="hl-purple"><strong>common (key) column</strong></span></li>
</ol>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
</section>
<section id="pipe-operator" class="slide level2">
<h2>Pipe operator</h2>
<p>In <code>{tidyverse}</code> the <span class="hl-yellow"><strong>pipe operator</strong></span>, defined as <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>), will be key: it will be a <span class="hl-yellow"><strong>pipe that traverses the data</strong></span> and transforms it.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<p>In R base, if we want to apply three functions <code>first()</code>, <code>second()</code> and <code>third()</code> in order, it would be</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb243"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb243-1"><a href="#cb243-1"></a><span class="fu">third</span>(<span class="fu">second</span>(<span class="fu">first</span>(data)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<p>In <code>{tidyverse}</code> we can <span class="hl-yellow"><strong>read from left to right</strong></span> and separate the data from the actions</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb244"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb244-1"><a href="#cb244-1"></a>data <span class="sc">|&gt;</span> <span class="fu">first</span>() <span class="sc">|&gt;</span> <span class="fu">second</span>() <span class="sc">|&gt;</span> <span class="fu">third</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="callout callout-caution callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note that‚Ä¶</strong></p>
</div>
<div class="callout-content">
<p>Since version 4.1.0 of <code>R</code> we have <code>|&gt;</code>, a <strong>native</strong> pipe available <span class="hl-purple"><strong>outside tidyverse</strong></span>, replacing the <span class="hl-red"><strong>old pipe</strong></span> <code>%&gt;%</code> which depended on the <code>{magrittr}</code> package (quite problematic).</p>
</div>
</div>
</div>
</div>
</section>
<section id="pipe-operator-1" class="slide level2">
<h2>Pipe operator</h2>
<p>The main advantage is that the <span class="hl-yellow"><strong>code is very readable (almost literal)</strong></span> and you can do large operations on the data with very little code.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb245"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb245-1"><a href="#cb245-1"></a>data <span class="sc">|&gt;</span></span>
<span id="cb245-2"><a href="#cb245-2"></a>  <span class="fu">tidy</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-3"><a href="#cb245-3"></a>  <span class="fu">filter</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-4"><a href="#cb245-4"></a>  <span class="fu">select</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-5"><a href="#cb245-5"></a>  <span class="fu">arrange</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-6"><a href="#cb245-6"></a>  <span class="fu">modify</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-7"><a href="#cb245-7"></a>  <span class="fu">rename</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-8"><a href="#cb245-8"></a>  <span class="fu">group</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-9"><a href="#cb245-9"></a>  <span class="fu">count</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-10"><a href="#cb245-10"></a>  <span class="fu">summary</span>(...) <span class="sc">|&gt;</span></span>
<span id="cb245-11"><a href="#cb245-11"></a>  <span class="fu">plot</span>(...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<center>
<img src="img/logo_pipe.png" width="360px">
</center>
</div>
</div>
</section>
<section id="messy-data" class="slide level2">
<h2>Messy data</h2>
<p>But what does the <span class="hl-yellow"><strong>non-tidy data</strong></span> look like? Let‚Äôs load the <code>table4a</code> table from the <code>{tidyr}</code> package (we already have it loaded from the tidyverse environment).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb246"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb246-1"><a href="#cb246-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb246-2"><a href="#cb246-2"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>What could be wrong?</strong></span></p>
</section>
<section id="pivoting-pivot_longer" class="slide level2">
<h2>Pivoting: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:40%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb248"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb248-1"><a href="#cb248-1"></a>table4a</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 3
  country     `1999` `2000`
  &lt;chr&gt;        &lt;dbl&gt;  &lt;dbl&gt;
1 Afghanistan    745   2666
2 Brazil       37737  80488
3 China       212258 213766</code></pre>
</div>
</div>
</div><div class="column" style="width:60%;">
<p>‚ùé Each <span class="hl-red"><strong>row represents two observations</strong></span> (1999 and 2000) ‚Üí columns <code>1999</code> and <code>2000</code> should actually themselves be <span class="hl-yellow"><strong>values of a variable</strong></span> and not column names.</p>
</div>
</div>
<div class="fragment">
<p>We will include a <span class="hl-yellow"><strong>new column</strong></span> that stores the year and another one that stores the value of the variable of interest in each of those years. And we will do it with the <code>pivot_longer()</code> function: <span class="hl-yellow"><strong>pivot the table</strong></span> to long format</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb250"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb250-1"><a href="#cb250-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb250-2"><a href="#cb250-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>), <span class="at">names_to =</span> <span class="st">"year"</span>, <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div>
</section>
<section id="pivoting-pivot_longer-1" class="slide level2">
<h2>Pivoting: pivot_longer()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb252"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb252-1"><a href="#cb252-1"></a>table4a <span class="sc">|&gt;</span> </span>
<span id="cb252-2"><a href="#cb252-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="fu">c</span>(<span class="st">"1999"</span>, <span class="st">"2000"</span>),</span>
<span id="cb252-3"><a href="#cb252-3"></a>               <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb252-4"><a href="#cb252-4"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year   cases
  &lt;chr&gt;       &lt;chr&gt;  &lt;dbl&gt;
1 Afghanistan 1999     745
2 Afghanistan 2000    2666
3 Brazil      1999   37737
4 Brazil      2000   80488
5 China       1999  212258
6 China       2000  213766</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p><img data-src="img/table4a.jpg"></p>
</div>
</div>
<ul>
<li><code>cols</code>: <span class="hl-yellow"><strong>name of the variables to be pivoted</strong></span></li>
<li><code>names_to</code>: name of the new variable to which we send the <span class="hl-yellow"><strong>header</strong></span> of the table (the names).</li>
<li><code>values_to</code>: name of the new variable to which we are going to send the <span class="hl-yellow"><strong>data</strong></span>.</li>
</ul>
</section>
<section id="messy-data-1" class="slide level2">
<h2>Messy data</h2>
<p>Let us see another example in <code>table2</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb254"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb254-1"><a href="#cb254-1"></a>table2</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>What could be wrong?</strong></span></p>
</section>
<section id="pivoting-pivot_wider" class="slide level2">
<h2>Pivoting: pivot_wider()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 12 √ó 4
   country      year type            count
   &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;           &lt;dbl&gt;
 1 Afghanistan  1999 cases             745
 2 Afghanistan  1999 population   19987071
 3 Afghanistan  2000 cases            2666
 4 Afghanistan  2000 population   20595360
 5 Brazil       1999 cases           37737
 6 Brazil       1999 population  172006362
 7 Brazil       2000 cases           80488
 8 Brazil       2000 population  174504898
 9 China        1999 cases          212258
10 China        1999 population 1272915272
11 China        2000 cases          213766
12 China        2000 population 1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>‚ùé Each <span class="hl-red"><strong>observation is divided into two rows</strong></span> ‚Üí the <span class="hl-yellow"><strong>records with the same year should be the same</strong></span></p>
</div>
</div>
<div class="fragment">
<p>We will do will be the opposite: with <code>pivot_wider()</code> <span class="hl-yellow"><strong>we will widen the table</strong></span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb257"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb257-1"><a href="#cb257-1"></a>table2 <span class="sc">|&gt;</span>  <span class="fu">pivot_wider</span>(<span class="at">names_from =</span> type, <span class="at">values_from =</span> count)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year  cases population
  &lt;chr&gt;       &lt;dbl&gt;  &lt;dbl&gt;      &lt;dbl&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="messy-data-2" class="slide level2">
<h2>Messy data</h2>
<p>Let us see another example in <code>table3</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb259"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb259-1"><a href="#cb259-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>What could be wrong?</strong></span></p>
</section>
<section id="separate" class="slide level2">
<h2>separate()</h2>
<div class="columns">
<div class="column" style="width:60%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb261"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb261-1"><a href="#cb261-1"></a>table3</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country      year rate             
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;            
1 Afghanistan  1999 745/19987071     
2 Afghanistan  2000 2666/20595360    
3 Brazil       1999 37737/172006362  
4 Brazil       2000 80488/174504898  
5 China        1999 212258/1272915272
6 China        2000 213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:40%;">
<p>‚ùé Each <span class="hl-red"><strong>cell contains several values</strong></span></p>
</div>
</div>
<div class="fragment">
<p>What we will do is make use of the <code>separate()</code> function to send <span class="hl-yellow"><strong>separate each value</strong></span> to a different column.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb263"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb263-1"><a href="#cb263-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="separate-1" class="slide level2">
<h2>separate()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb265"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb265-1"><a href="#cb265-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year cases  pop       
  &lt;chr&gt;       &lt;dbl&gt; &lt;chr&gt;  &lt;chr&gt;     
1 Afghanistan  1999 745    19987071  
2 Afghanistan  2000 2666   20595360  
3 Brazil       1999 37737  172006362 
4 Brazil       2000 80488  174504898 
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
<p>Notice that the data, although it has separated them, <span class="hl-red"><strong>kept them as text</strong></span> when in fact they should be numeric variables. For this we can add the optional argument <code>convert = TRUE</code>. . . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb267"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb267-1"><a href="#cb267-1"></a>table3 <span class="sc">|&gt;</span> <span class="fu">separate</span>(rate, <span class="at">into =</span> <span class="fu">c</span>(<span class="st">"cases"</span>, <span class="st">"pop"</span>), <span class="at">convert =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country      year  cases        pop
  &lt;chr&gt;       &lt;dbl&gt;  &lt;int&gt;      &lt;int&gt;
1 Afghanistan  1999    745   19987071
2 Afghanistan  2000   2666   20595360
3 Brazil       1999  37737  172006362
4 Brazil       2000  80488  174504898
5 China        1999 212258 1272915272
6 China        2000 213766 1280428583</code></pre>
</div>
</div>
</section>
<section id="messy-data-3" class="slide level2">
<h2>Messy data</h2>
<p>Let us see the last example in <code>table5</code></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb269"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb269-1"><a href="#cb269-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
<p><span class="hl-red"><strong>What could be wrong?</strong></span></p>
</section>
<section id="unite" class="slide level2">
<h2>unite()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb271"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb271-1"><a href="#cb271-1"></a>table5</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 4
  country     century year  rate             
  &lt;chr&gt;       &lt;chr&gt;   &lt;chr&gt; &lt;chr&gt;            
1 Afghanistan 19      99    745/19987071     
2 Afghanistan 20      00    2666/20595360    
3 Brazil      19      99    37737/172006362  
4 Brazil      20      00    80488/174504898  
5 China       19      99    212258/1272915272
6 China       20      00    213766/1280428583</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<p>‚ùé We have <span class="hl-red"><strong>same values divided into two columns</strong></span></p>
</div>
</div>
<div class="fragment">
<p>We will use <code>unite()</code> to <span class="hl-yellow"><strong>unite the values</strong></span> of century and year in the same column</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb273"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb273-1"><a href="#cb273-1"></a>table5 <span class="sc">|&gt;</span> <span class="fu">unite</span>(<span class="at">col =</span> year_whole, century, year, <span class="at">sep =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 3
  country     year_whole rate             
  &lt;chr&gt;       &lt;chr&gt;      &lt;chr&gt;            
1 Afghanistan 1999       745/19987071     
2 Afghanistan 2000       2666/20595360    
3 Brazil      1999       37737/172006362  
4 Brazil      2000       80488/174504898  
5 China       1999       212258/1272915272
6 China       2000       213766/1280428583</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-2" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-6" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-6-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-6-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-6-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-6-1">
<p>üìù Take a look at table <code>table4b</code> in package <code>{tidyr}</code>. Is it tidydata? If not, what is wrong, how to convert it to tidy data in case it is not already?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb275"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb275-1"><a href="#cb275-1"></a>table4b <span class="sc">|&gt;</span></span>
<span id="cb275-2"><a href="#cb275-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"1999"</span><span class="sc">:</span><span class="st">"2000"</span>, <span class="at">names_to =</span> <span class="st">"year"</span>,</span>
<span id="cb275-3"><a href="#cb275-3"></a>               <span class="at">values_to =</span> <span class="st">"cases"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-2">
<p>üìù Take a look at table <code>relig_income</code> in package <code>{tidyr}</code>. Is it tidydata? If not, what is wrong, how to convert it to tidy data in case it is not already?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb276"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb276-1"><a href="#cb276-1"></a>relig_income <span class="sc">|&gt;</span></span>
<span id="cb276-2"><a href="#cb276-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"&lt;$10k"</span><span class="sc">:</span><span class="st">"Don't know/refused"</span>,</span>
<span id="cb276-3"><a href="#cb276-3"></a>               <span class="at">names_to =</span> <span class="st">"income"</span>,</span>
<span id="cb276-4"><a href="#cb276-4"></a>               <span class="at">values_to =</span> <span class="st">"people"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-6-3">
<p>üìù Take a look at table <code>billboard</code> in package <code>{tidyr}</code>. Is it tidydata? If not, what is wrong, how to convert it to tidy data in case it is not already?</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb277"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb277-1"><a href="#cb277-1"></a>billboard <span class="sc">|&gt;</span></span>
<span id="cb277-2"><a href="#cb277-2"></a>  <span class="fu">pivot_longer</span>(<span class="at">cols =</span> <span class="st">"wk1"</span><span class="sc">:</span><span class="st">"wk76"</span>,</span>
<span id="cb277-3"><a href="#cb277-3"></a>               <span class="at">names_to =</span> <span class="st">"week"</span>,</span>
<span id="cb277-4"><a href="#cb277-4"></a>               <span class="at">names_prefix =</span> <span class="st">"wk"</span>,</span>
<span id="cb277-5"><a href="#cb277-5"></a>               <span class="at">values_to =</span> <span class="st">"position"</span>,</span>
<span id="cb277-6"><a href="#cb277-6"></a>               <span class="at">values_drop_na =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="caso-pr√°ctico-3" class="slide level2">
<h2>üê£ Case study</h2>
<p>In the <code>{tidyr}</code> package we have the <code>who</code> dataset (World Health Organization dataset).</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb278"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb278-1"><a href="#cb278-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb278-2"><a href="#cb278-2"></a>who</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ol type="1">
<li>What do <span class="hl-yellow"><strong>data</strong></span> mean? How many <span class="hl-yellow"><strong>variables and observations</strong></span> do we have?</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>How many <span class="hl-yellow"><strong>variable types</strong></span> do we have?</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Are all variables necessary? <span class="hl-yellow"><strong>Remove redundant information</strong></span>.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li><span class="hl-yellow"><strong>Convert to tidydata</strong></span> the database by making all the options you consider (tip: use paper to sketch how the database should look like).</li>
</ol>
</div>
</section></section>
<section>
<section id="clase-3" class="title-slide slide level1 center">
<h1>Lesson 3: tidyverse (rows)</h1>
<p><span style="color:#444442;"><strong>Handling data by rows</strong></span></p>
</section>
<section id="what-about-tidyverse-3" class="slide level2">
<h2>What about tidyverse?</h2>
<div class="columns">
<div class="column" style="width:45%;">
<p><img data-src="img/tidyverrse_universe.jpg"></p>
</div><div class="column" style="width:55%;">
<ul>
<li><code>{tibble}</code>: <span class="hl-yellow"><strong>optimizing data.frame</strong></span></li>
<li><code>{tidyr}</code>: data cleaning</li>
<li><code>{readr}</code>: loading rectangular data (.csv)</li>
<li><code>{dplyr}</code>: <span class="hl-yellow"><strong>grammar for debugging</strong></span></li>
<li><code>{stringr}</code>: text handling</li>
<li><code>{ggplot2}</code>: data visualization</li>
<li><code>{tidymodels}</code>: modeling/prediction</li>
</ul>
</div>
</div>
<p>We also have the <code>{purrr}</code> packages for list management, <code>{forcast}</code> for qualitative variables, <code>{lubridate}</code> for dates, <code>{readxl}</code> for importing .xls and .xlsx files, <code>{rvest}</code> for web scraping and <code>{rmarkdown}</code> for reporting results.</p>
</section>
<section id="preprocessing-dplyr" class="slide level2">
<h2>Preprocessing: dplyr</h2>
<p>Within <code>{tidyverse}</code>, we will use the <code>{dplyr}</code> package for the <span class="hl-yellow"><strong>preprocessing and debugging</strong></span> of databases.</p>
<div class="columns">
<div class="column" style="width:50%;">
<p>All the debugging process that we are going to perform is on the <span class="hl-yellow"><strong>assumption that our data is in tidydata format</strong></span></p>
</div><div class="column" style="width:50%;">
<p><img data-src="img/tidy_def.jpg" style="width:160.0%"></p>
</div>
</div>
<p>Remember that in <code>{tidyverse}</code> the <span class="hl-yellow"><strong>pipe operator</strong></span> defined as <code>|&gt;</code> (<span class="hl-purple"><strong>ctrl+shift+M</strong></span>) will be crucial: it will be a <span class="hl-yellow"><strong>pipe that traverses the data</strong></span> and transforms it.</p>
<div class="fragment">
<p>Let‚Äôs practice with the <code>starwars</code> dataset from the loaded <code>{dplyr}</code> package.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb279"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb279-1"><a href="#cb279-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb279-2"><a href="#cb279-2"></a>starwars</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="sampling" class="slide level2">
<h2>Sampling</h2>
<div class="columns">
<div class="column" style="width:60%;">
<p>One of the most common operations is what is known in statistics as <span class="hl-yellow"><strong>sampling</strong></span>: a <span class="hl-yellow"><strong>selection or filtering of records</strong></span> (a subsample).</p>
</div><div class="column" style="width:40%;">
<p><img data-src="img/muestreo.jpeg" width="500"></p>
</div>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Non-random (by quotas)</strong></span>: based on logical conditions on the records (<code>filter()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Non-random (intentional/discretionary)</strong></span>: in terms of position (<code>slice()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Simple random</strong></span> (<code>slice_sample()</code>)</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><span class="hl-purple"><strong>Stratified simple sampling</strong></span> (<code>group_by()</code> + <code>slice_sample()</code>)</li>
</ul>
</div>
</section>
<section id="filtering-filter" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb280"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb280-1"><a href="#cb280-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb280-2"><a href="#cb280-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb281"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb281-1"><a href="#cb281-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb281-2"><a href="#cb281-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>The simplest one is when <span class="hl-yellow"><strong>filter records</strong></span> based on some logical condition: with <code>filter()</code> only individuals that verify certain conditions will be selected (non-random sampling by conditions).</p>
<div>
<ul>
<li class="fragment"><code>==</code>, <code>!=</code>: <span class="hl-purple"><strong>equal</strong></span> or <span class="hl-yellow"><strong>different</strong></span> to (<code>|&gt; filter(variable == "a")</code>)</li>
<li class="fragment"><code>&gt;</code>, <code>&lt;</code>: <span class="hl-purple"><strong>greater</strong></span> or <span class="hl-yellow"><strong>less</strong></span> than (<code>|&gt; filter(variable &lt; 3)</code>)</li>
<li class="fragment"><code>&gt;=</code>, <code>&lt;=</code>: <span class="hl-yellow"><strong>greater or equal</strong></span> or <span class="hl-purple"><strong>less or equal</strong></span> to (<code>|&gt; filter(variable &gt;= 5)</code>)</li>
<li class="fragment"><code>%in%</code>: values <span class="hl-yellow"><strong>belong</strong></span> to a valid set of options (<code>|&gt; filter(variable %in% c("blue", "green"))</code>)</li>
<li class="fragment"><code>between(variable, val1, val2)</code>: if continuous numerical values are <span class="hl-yellow"><strong>within a range</strong></span> (<code>|&gt; filter(between(variable, 160, 180))</code>)</li>
</ul>
</div>
</section>
<section id="filtering-filter-1" class="slide level2">
<h2>Filtering: filter()</h2>
<p>These <span class="hl-yellow"><strong>logical conditions</strong></span> can be <span class="hl-yellow"><strong>combined</strong></span> in different ways (and, or, or mutually exclusive).</p>

<img data-src="img/tablas_verdad.png" class="r-stretch"><div class="fragment">
<div class="callout callout-tip callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Remember that inside <code>filter()</code> there must always be something that returns a <span class="hl-green"><strong>vector of logical values</strong></span>.</p>
</div>
</div>
</div>
</div>
</section>
<section id="filtering-filter-2" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb282"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb282-1"><a href="#cb282-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb282-2"><a href="#cb282-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb283"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb283-1"><a href="#cb283-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb283-2"><a href="#cb283-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you go about‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> the characters with <span class="hl-purple"><strong>brown eyes</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>What kind of variable is it?</strong></span> ‚Äì&gt; The variable <code>eye_color</code> is qualitative so it is represented by texts. . . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb284"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb284-1"><a href="#cb284-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb284-2"><a href="#cb284-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 21 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Leia Or‚Ä¶    150  49   brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 2 Biggs D‚Ä¶    183  84   black      light      brown           24   male  mascu‚Ä¶
 3 Han Solo    180  80   brown      fair       brown           29   male  mascu‚Ä¶
 4 Yoda         66  17   white      green      brown          896   male  mascu‚Ä¶
 5 Boba Fe‚Ä¶    183  78.2 black      fair       brown           31.5 male  mascu‚Ä¶
 6 Lando C‚Ä¶    177  79   black      dark       brown           31   male  mascu‚Ä¶
 7 Arvel C‚Ä¶     NA  NA   brown      fair       brown           NA   male  mascu‚Ä¶
 8 Wicket ‚Ä¶     88  20   brown      brown      brown            8   male  mascu‚Ä¶
 9 Quarsh ‚Ä¶    183  NA   black      dark       brown           62   &lt;NA&gt;  &lt;NA&gt;  
10 Shmi Sk‚Ä¶    163  NA   black      fair       brown           72   fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 11 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtering-filter-3" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb286"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb286-1"><a href="#cb286-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb286-2"><a href="#cb286-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb287"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb287-1"><a href="#cb287-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb287-2"><a href="#cb287-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you go about‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> the characters without <span class="hl-purple"><strong>brown eyes</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb288"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb288-1"><a href="#cb288-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb288-2"><a href="#cb288-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">!=</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 66 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 C-3PO       167    75 &lt;NA&gt;       gold       yellow         112   none  mascu‚Ä¶
 3 R2-D2        96    32 &lt;NA&gt;       white, bl‚Ä¶ red             33   none  mascu‚Ä¶
 4 Darth V‚Ä¶    202   136 none       white      yellow          41.9 male  mascu‚Ä¶
 5 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 6 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 7 R5-D4        97    32 &lt;NA&gt;       white, red red             NA   none  mascu‚Ä¶
 8 Obi-Wan‚Ä¶    182    77 auburn, w‚Ä¶ fair       blue-gray       57   male  mascu‚Ä¶
 9 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
10 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
# ‚Ñπ 56 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtering-filter-4" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb290"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb290-1"><a href="#cb290-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb290-2"><a href="#cb290-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb291"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb291-1"><a href="#cb291-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb291-2"><a href="#cb291-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you go about‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> the characters with <span class="hl-purple"><strong>brown or blue eyes</strong></span>? . . .</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb292"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb292-1"><a href="#cb292-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb292-2"><a href="#cb292-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"blue"</span>, <span class="st">"brown"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 3 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 4 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 5 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
 6 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
 7 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
 8 Chewbac‚Ä¶    228   112 brown      unknown    blue           200   male  mascu‚Ä¶
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu‚Ä¶
10 Jek Ton‚Ä¶    180   110 brown      fair       blue            NA   male  mascu‚Ä¶
# ‚Ñπ 30 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtering-filter-5" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb294"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb294-1"><a href="#cb294-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb294-2"><a href="#cb294-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb295"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb295-1"><a href="#cb295-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb295-2"><a href="#cb295-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Note that <code>%in%</code> is equivalent to concatenating several <code>==</code> with a conjunction or (<code>|</code>)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb296"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb296-1"><a href="#cb296-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb296-2"><a href="#cb296-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"blue"</span> <span class="sc">|</span> eye_color <span class="sc">==</span> <span class="st">"brown"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 40 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 Luke Sk‚Ä¶    172    77 blond      fair       blue            19   male  mascu‚Ä¶
 2 Leia Or‚Ä¶    150    49 brown      light      brown           19   fema‚Ä¶ femin‚Ä¶
 3 Owen La‚Ä¶    178   120 brown, gr‚Ä¶ light      blue            52   male  mascu‚Ä¶
 4 Beru Wh‚Ä¶    165    75 brown      light      blue            47   fema‚Ä¶ femin‚Ä¶
 5 Biggs D‚Ä¶    183    84 black      light      brown           24   male  mascu‚Ä¶
 6 Anakin ‚Ä¶    188    84 blond      fair       blue            41.9 male  mascu‚Ä¶
 7 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue            64   male  mascu‚Ä¶
 8 Chewbac‚Ä¶    228   112 brown      unknown    blue           200   male  mascu‚Ä¶
 9 Han Solo    180    80 brown      fair       brown           29   male  mascu‚Ä¶
10 Jek Ton‚Ä¶    180   110 brown      fair       blue            NA   male  mascu‚Ä¶
# ‚Ñπ 30 more rows
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="filtering-filter-6" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb298"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb298-1"><a href="#cb298-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb298-2"><a href="#cb298-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb299"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb299-1"><a href="#cb299-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb299-2"><a href="#cb299-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you go about‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> the characters <span class="hl-purple"><strong>are between 120 and 160 cm</strong></span>?</p>
<div class="fragment">
<p><span class="hl-yellow"><strong>What type of variable is it?</strong></span> ‚Äì&gt; The variable <code>height</code> is a continuous quantitative variable so we must filter by ranges of values (intervals) ‚Äì&gt; we will use <code>between()</code>.</p>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb300"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb300-1"><a href="#cb300-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb300-2"><a href="#cb300-2"></a>  <span class="fu">filter</span>(<span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">160</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Leia Org‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femin‚Ä¶
2 Mon Moth‚Ä¶    150    NA auburn     fair       blue              48 fema‚Ä¶ femin‚Ä¶
3 Nien Nunb    160    68 none       grey       black             NA male  mascu‚Ä¶
4 Watto        137    NA black      blue, grey yellow            NA male  mascu‚Ä¶
5 Gasgano      122    NA none       white, bl‚Ä¶ black             NA male  mascu‚Ä¶
6 Cord√©        157    NA brown      light      brown             NA fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtering-filter-7" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb302"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb302-1"><a href="#cb302-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb302-2"><a href="#cb302-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb303"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb303-1"><a href="#cb303-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb303-2"><a href="#cb303-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> characters that <span class="hl-purple"><strong>have brown eyes and are not human</strong></span>?</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb304"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb304-1"><a href="#cb304-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb304-2"><a href="#cb304-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Yoda          66    17 white      green      brown            896 male  mascu‚Ä¶
2 Wicket S‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶
3 Eeth Koth    171    NA black      brown      brown             NA male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="filtering-filter-8" class="slide level2">
<h2>Filtering: filter()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb306"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb306-1"><a href="#cb306-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb306-2"><a href="#cb306-2"></a>  <span class="fu">filtro</span>(condicion)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb307"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb307-1"><a href="#cb307-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb307-2"><a href="#cb307-2"></a>  <span class="fu">filter</span>(condition)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>How would you‚Ä¶ <span class="hl-yellow"><strong>filter</strong></span> characters that <span class="hl-purple"><strong>have eyes and are not human, or are over 60 years old</strong></span>? Think it through: the <span class="hl-yellow"><strong>parentheses are important</strong></span>: <span class="math inline">\((a+b)*c\)</span> is not the same as <span class="math inline">\(a+(b*c)\)</span>.</p>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb308"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb308-1"><a href="#cb308-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb308-2"><a href="#cb308-2"></a>  <span class="fu">filter</span>((eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">!=</span> <span class="st">"Human"</span>) <span class="sc">|</span> birth_year <span class="sc">&gt;</span> <span class="dv">60</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 18 √ó 14
   name     height  mass hair_color skin_color eye_color birth_year sex   gender
   &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
 1 C-3PO       167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
 2 Wilhuff‚Ä¶    180    NA auburn, g‚Ä¶ fair       blue              64 male  mascu‚Ä¶
 3 Chewbac‚Ä¶    228   112 brown      unknown    blue             200 male  mascu‚Ä¶
 4 Jabba D‚Ä¶    175  1358 &lt;NA&gt;       green-tan‚Ä¶ orange           600 herm‚Ä¶ mascu‚Ä¶
 5 Yoda         66    17 white      green      brown            896 male  mascu‚Ä¶
 6 Palpati‚Ä¶    170    75 grey       pale       yellow            82 male  mascu‚Ä¶
 7 Wicket ‚Ä¶     88    20 brown      brown      brown              8 male  mascu‚Ä¶
 8 Qui-Gon‚Ä¶    193    89 brown      fair       blue              92 male  mascu‚Ä¶
 9 Finis V‚Ä¶    170    NA blond      fair       blue              91 male  mascu‚Ä¶
10 Quarsh ‚Ä¶    183    NA black      dark       brown             62 &lt;NA&gt;  &lt;NA&gt;  
11 Shmi Sk‚Ä¶    163    NA black      fair       brown             72 fema‚Ä¶ femin‚Ä¶
12 Mace Wi‚Ä¶    188    84 none       dark       brown             72 male  mascu‚Ä¶
13 Ki-Adi-‚Ä¶    198    82 white      pale       yellow            92 male  mascu‚Ä¶
14 Eeth Ko‚Ä¶    171    NA black      brown      brown             NA male  mascu‚Ä¶
15 Cliegg ‚Ä¶    183    NA brown      fair       blue              82 male  mascu‚Ä¶
16 Dooku       193    80 white      fair       brown            102 male  mascu‚Ä¶
17 Bail Pr‚Ä¶    191    NA black      tan        brown             67 male  mascu‚Ä¶
18 Jango F‚Ä¶    183    79 black      tan        brown             66 male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="drop-missing-drop_na" class="slide level2">
<h2>Drop missing: drop_na()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb310"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb310-1"><a href="#cb310-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb310-2"><a href="#cb310-2"></a>  <span class="fu">retirar_ausentes</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb311"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb311-1"><a href="#cb311-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb311-2"><a href="#cb311-2"></a>  <span class="fu">drop_na</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>There is a special filter for one of the most common operations in debugging: <span class="hl-yellow"><strong>remove absent</strong></span>. For this we can use inside a filter <code>is.na()</code>, which returns <code>TRUE/FALSE</code> depending on whether it is absent, or ‚Ä¶.</p>
<div class="fragment">
<p>Use <code>drop_na()</code>: if no variable is specified, it removes records with absent in any variable. Later we will see how to <span class="hl-yellow"><strong>impute those missing ones</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb312"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb312-1"><a href="#cb312-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb312-2"><a href="#cb312-2"></a>  <span class="fu">drop_na</span>(mass, height)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 4
  name                mass height hair_color 
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;      
1 Luke Skywalker        77    172 blond      
2 C-3PO                 75    167 &lt;NA&gt;       
3 R2-D2                 32     96 &lt;NA&gt;       
4 Darth Vader          136    202 none       
5 Leia Organa           49    150 brown      
6 Owen Lars            120    178 brown, grey
7 Beru Whitesun lars    75    165 brown      </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb314"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb314-1"><a href="#cb314-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb314-2"><a href="#cb314-2"></a>  <span class="fu">drop_na</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 7 √ó 4
  name                mass height hair_color   
  &lt;chr&gt;              &lt;dbl&gt;  &lt;int&gt; &lt;chr&gt;        
1 Luke Skywalker        77    172 blond        
2 Darth Vader          136    202 none         
3 Leia Organa           49    150 brown        
4 Owen Lars            120    178 brown, grey  
5 Beru Whitesun lars    75    165 brown        
6 Biggs Darklighter     84    183 black        
7 Obi-Wan Kenobi        77    182 auburn, white</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="tu-turno-3" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-7" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-7-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-7-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-7-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-7-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li><li><a href="#tabset-7-5"><span class="hl-yellow"><strong>Exercise 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-7-1">
<p>üìù Select from the starwars dataset only those characters that are androids or whose <code>species</code> value is unknown.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb316"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb316-1"><a href="#cb316-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb316-2"><a href="#cb316-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Droid"</span> <span class="sc">|</span> <span class="fu">is.na</span>(species))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-2">
<p>üìù Select from the starwars dataset only the characters whose weight is between 65 and 90 kg.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb317"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb317-1"><a href="#cb317-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">between</span>(mass, <span class="dv">65</span>, <span class="dv">90</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-3">
<p>üìù After clearing missing data in all variables, select from the starwars dataset only the characters that are human and come from Tatooine.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb318"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb318-1"><a href="#cb318-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb318-2"><a href="#cb318-2"></a>  <span class="fu">drop_na</span>() <span class="sc">|&gt;</span> </span>
<span id="cb318-3"><a href="#cb318-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> homeworld <span class="sc">==</span> <span class="st">"Tatooine"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-4">
<p>üìù Select, from the original starwars dataset, non-human characters, <code>male</code> in sex and measuring between 120 and 170 cm, or characters with brown or red eyes.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb319"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb319-1"><a href="#cb319-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb319-2"><a href="#cb319-2"></a>  <span class="fu">filter</span>((species <span class="sc">!=</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> sex <span class="sc">==</span> <span class="st">"male"</span> <span class="sc">&amp;</span></span>
<span id="cb319-3"><a href="#cb319-3"></a>            <span class="fu">between</span>(height, <span class="dv">120</span>, <span class="dv">170</span>)) <span class="sc">|</span></span>
<span id="cb319-4"><a href="#cb319-4"></a>           eye_color <span class="sc">%in%</span> <span class="fu">c</span>(<span class="st">"brown"</span>, <span class="st">"red"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-7-5">
<p>üìù Check information about the <code>str_detect()</code> function (<code>{stringr}</code> package loaded in <code>{tidyverse}</code>). Tip: test the functions you are going to use with some test vector beforehand so that you can check how they work. After you know what it does, filter out only those characters with the last name <code>Skywalker</code>.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb320"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb320-1"><a href="#cb320-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="fu">str_detect</span>(name, <span class="st">"Skywalker"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="slice-of-data-slice" class="slide level2">
<h2>Slice of data: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb321"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb321-1"><a href="#cb321-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb322"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb322-1"><a href="#cb322-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice</span>(positions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Sometimes we may be interested in performing a <span class="hl-yellow"><strong>non-random discretionary sampling</strong></span>, or in other words, <span class="hl-yellow"><strong>filter by position</strong></span>: with <code>slice(positions)</code> we can select specific rows by passing as argument a <span class="hl-yellow"><strong>index vector</strong></span>.</p>
<div class="fragment">
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb323"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb323-1"><a href="#cb323-1"></a><span class="co"># fila 1</span></span>
<span id="cb323-2"><a href="#cb323-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb323-3"><a href="#cb323-3"></a>  <span class="fu">slice</span>(<span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 1 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb325"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb325-1"><a href="#cb325-1"></a><span class="co"># filas de la 7 a la 9</span></span>
<span id="cb325-2"><a href="#cb325-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb325-3"><a href="#cb325-3"></a>  <span class="fu">slice</span>(<span class="dv">7</span><span class="sc">:</span><span class="dv">9</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 4
  name               height  mass hair_color
  &lt;chr&gt;               &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Beru Whitesun lars    165    75 brown     
2 R5-D4                  97    32 &lt;NA&gt;      
3 Biggs Darklighter     183    84 black     </code></pre>
</div>
</div>
</div>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb327"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb327-1"><a href="#cb327-1"></a><span class="co"># filas 2, 7, 10 y 31</span></span>
<span id="cb327-2"><a href="#cb327-2"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb327-3"><a href="#cb327-3"></a>  <span class="fu">slice</span>(<span class="fu">c</span>(<span class="dv">2</span>, <span class="dv">7</span>, <span class="dv">10</span>, <span class="dv">31</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 8
  name             height  mass hair_color skin_color eye_color birth_year sex  
  &lt;chr&gt;             &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt;
1 C-3PO               167    75 &lt;NA&gt;       gold       yellow           112 none 
2 Beru Whitesun l‚Ä¶    165    75 brown      light      blue              47 fema‚Ä¶
3 Obi-Wan Kenobi      182    77 auburn, w‚Ä¶ fair       blue-gray         57 male 
4 Qui-Gon Jinn        193    89 brown      fair       blue              92 male </code></pre>
</div>
</div>
</div>
</section>
<section id="slice-of-data-slice-1" class="slide level2">
<h2>Slice of data: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb329"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb329-1"><a href="#cb329-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb329-2"><a href="#cb329-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb330"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb330-1"><a href="#cb330-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb330-2"><a href="#cb330-2"></a>  <span class="fu">slice</span>(positions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We have some default options:</p>
<ul>
<li>with <code>slice_head(n = ...)</code> and <code>slice_tail(n = ...)</code> we can get the <span class="hl-yellow"><strong>header and tail</strong></span> of the table.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb331"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb331-1"><a href="#cb331-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_head</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Luke Skywalker    172    77 blond     
2 C-3PO             167    75 &lt;NA&gt;      </code></pre>
</div>
</div>
</div><div class="column" style="width:&quot;50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb333"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb333-1"><a href="#cb333-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_tail</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name           height  mass hair_color
  &lt;chr&gt;           &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Captain Phasma     NA    NA unknown   
2 Padm√© Amidala     165    45 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="slice-of-data-slice-2" class="slide level2">
<h2>Slice of data: slice()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb335"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb335-1"><a href="#cb335-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb335-2"><a href="#cb335-2"></a>  <span class="fu">rebanadas</span>(posiciones)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb336"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb336-1"><a href="#cb336-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb336-2"><a href="#cb336-2"></a>  <span class="fu">slice</span>(positions)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We have some default options:</p>
<ul>
<li>with <code>slice_max()</code> and <code>slice_min()</code> we get the <span class="hl-yellow"><strong>rows with smallest/largest value of a variable</strong></span> (if tie, all unless <code>with_ties = FALSE</code>) that we indicate in <code>order_by = ...</code>.</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb337"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb337-1"><a href="#cb337-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_min</span>(mass, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name          height  mass hair_color
  &lt;chr&gt;          &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Ratts Tyerell     79    15 none      
2 Yoda              66    17 white     </code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb339"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb339-1"><a href="#cb339-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 4
  name        height  mass hair_color
  &lt;chr&gt;        &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;     
1 Yarael Poof    264    NA none      
2 Tarfful        234   136 brown     </code></pre>
</div>
</div>
</div>
</div>
</section>
<section id="random-slices-slice_sample" class="slide level2">
<h2>Random slices: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb341"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb341-1"><a href="#cb341-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb341-2"><a href="#cb341-2"></a>  <span class="fu">rebanadas_aleatorias</span>(tama√±o_muestral)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb342"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb342-1"><a href="#cb342-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb342-2"><a href="#cb342-2"></a>  <span class="fu">slice_sample</span>(sample_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>The so-called <span class="hl-yellow"><strong>simple random sampling</strong></span> is based on <span class="hl-yellow"><strong>selecting individuals randomly</strong></span>, so that each one has certain <span class="hl-yellow"><strong>probabilities</strong></span> of being selected. With <code>slice_sample(n = ...)</code> we can randomly extract n (a priori equiprobable) records.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb343"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb343-1"><a href="#cb343-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name     height  mass hair_color skin_color eye_color birth_year sex   gender 
  &lt;chr&gt;     &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt;  
1 Dud Bolt     94    45 none       blue, grey yellow            NA male  mascul‚Ä¶
2 Lama Su     229    88 none       grey       black             NA male  mascul‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="callout callout-important callout-captioned callout-style-default">
<div class="callout-body">
<div class="callout-caption">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p><span class="hl-yellow"><strong>¬´Randomness¬ª does not imply equiprobable</strong></span>: a normal die is just as random as a trick die. There are no things ‚Äúmore random‚Äù than others, they simply have different underlying probability laws.</p>
</div>
</div>
</div>
</div>
</section>
<section id="random-slices-slice_sample-1" class="slide level2">
<h2>Random slices: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb345"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb345-1"><a href="#cb345-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb345-2"><a href="#cb345-2"></a>  <span class="fu">rebanadas_aleatorias</span>(tama√±o_muestral)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb346"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb346-1"><a href="#cb346-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb346-2"><a href="#cb346-2"></a>  <span class="fu">slice_sample</span>(sample_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We can also indicate the <span class="hl-yellow"><strong>proportion of data to be sampled</strong></span> (instead of the number) and if we want it to be <span class="hl-yellow"><strong>with replacement (that can be repeated)</strong></span>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb347"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb347-1"><a href="#cb347-1"></a><span class="co"># 5% de registros aleatorios con reemplazamiento</span></span>
<span id="cb347-2"><a href="#cb347-2"></a>starwars <span class="sc">|&gt;</span> </span>
<span id="cb347-3"><a href="#cb347-3"></a>  <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.05</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Beru Whi‚Ä¶    165    75 brown      light      blue              47 fema‚Ä¶ femin‚Ä¶
2 Qui-Gon ‚Ä¶    193    89 brown      fair       blue              92 male  mascu‚Ä¶
3 Palpatine    170    75 grey       pale       yellow            82 male  mascu‚Ä¶
4 Leia Org‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</section>
<section id="random-slices-slice_sample-2" class="slide level2">
<h2>Random slices: slice_sample()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb349"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb349-1"><a href="#cb349-1"></a>datos <span class="sc">|&gt;</span></span>
<span id="cb349-2"><a href="#cb349-2"></a>  <span class="fu">rebanadas_aleatorias</span>(tama√±o_muestral)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb350"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb350-1"><a href="#cb350-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb350-2"><a href="#cb350-2"></a>  <span class="fu">slice_sample</span>(sample_size)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>As we said, ‚Äúrandom‚Äù is not the same as ‚Äúequiprobable‚Äù, so we can pass a <span class="hl-yellow"><strong>probability vector</strong></span>. For example, let‚Äôs force that it is very improbable to draw a row other than the first two rows</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb351"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb351-1"><a href="#cb351-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb351-2"><a href="#cb351-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
2 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb353"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb353-1"><a href="#cb353-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb353-2"><a href="#cb353-2"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>, <span class="at">weight_by =</span> <span class="fu">c</span>(<span class="fl">0.495</span>, <span class="fl">0.495</span>, <span class="fu">rep</span>(<span class="fl">0.01</span><span class="sc">/</span><span class="dv">85</span>, <span class="dv">85</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
2 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="a-parenthesis-sample" class="slide level2">
<h2>A parenthesis: sample()</h2>
<p>The <code>slice_sample()</code> function is simply a <code>{tidyverse}</code> integration of the basic <code>R</code> function known as <code>sample()</code> that allows us to <span class="hl-yellow"><strong>sample elements</strong></span></p>
<div class="fragment">
<p>For example, we are going to <span class="hl-yellow"><strong>sample 10 rolls of a die</strong></span>, indicating to it.</p>
<ul>
<li><span class="hl-purple"><strong>support</strong></span> of our random variable (values allowed in <code>x</code>)</li>
<li><span class="hl-purple"><strong>size</strong></span> sample (<code>size</code>)</li>
<li><span class="hl-purple"><strong>replacement</strong></span> (if <code>TRUE</code> then it can come out repeated, as in the case of the die)</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb355"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb355-1"><a href="#cb355-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">10</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 1 4 4 4 6 6 4 1 5 2</code></pre>
</div>
</div>
</div>
</section>
<section id="a-parenthesis-sample-1" class="slide level2">
<h2>A parenthesis: sample()</h2>
<p>The previous option generates events of a random variable <span class="hl-yellow"><strong>equiprobable</strong></span> but as before, we can assign a vector of probabilities or <span class="hl-yellow"><strong>mass function</strong></span> to it with the argument <code>prob = ...</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb357"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb357-1"><a href="#cb357-1"></a><span class="fu">sample</span>(<span class="at">x =</span> <span class="dv">1</span><span class="sc">:</span><span class="dv">6</span>, <span class="at">size =</span> <span class="dv">50</span>, <span class="at">replace =</span> <span class="cn">TRUE</span>,</span>
<span id="cb357-2"><a href="#cb357-2"></a>       <span class="at">prob =</span> <span class="fu">c</span>(<span class="fl">0.5</span>, <span class="fl">0.2</span>, <span class="fl">0.1</span>, <span class="fl">0.1</span>, <span class="fl">0.05</span>, <span class="fl">0.05</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 4 1 2 1 1 1 2 1 6 1 1 1 1 1 4 2 1 1 2 1 1 1 6 2 2 3 3 1 1 1 1 2 1 1 1 5 2 1
[39] 1 5 1 6 2 6 1 1 1 4 1 2</code></pre>
</div>
</div>
</section>
<section id="a-parenthesis-sample-2" class="slide level2">
<h2>A parenthesis: sample()</h2>
<p><strong>How would you make the following statement?</strong></p>
<p>&nbsp;</p>
<p>Supongamos que en una ciudad se han estudiado los perfiles de votantes en parejas heterosexuales. Sean las variables aleatorias <span class="math inline">\(X_m\)</span> y <span class="math inline">\(X_h\)</span> tal que <span class="math inline">\(X_m=1\)</span> si una vota a un partido X, <span class="math inline">\(X_m=0\)</span> si no, <span class="math inline">\(X_h=1\)</span> si un hombre vota a un partido X y <span class="math inline">\(X_p=0\)</span> si no. El modelo te√≥rico asociado a este tipo de electorado indica que la distribuci√≥n conjunta viene dada por <span class="math inline">\(P(X_m = 1, X_h=1)=0.02\)</span>, <span class="math inline">\(P(X_m = 1, X_h=0)=0.08\)</span>, <span class="math inline">\(P(X_m = 1, X_h=0)=0.1\)</span> y <span class="math inline">\(P(X_m = 0, X_h=0)=0.8\)</span></p>
<p><strong>Generates a sample</strong> of size <span class="math inline">\(n = 1000\)</span> (support <code>"10"</code>, <code>"01"</code>, <code>"00"</code> and <code>"11"</code>) using <code>sample()</code>.</p>
</section>
<section id="tu-turno-3a" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-8" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-8-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-8-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li><li><a href="#tabset-8-3"><span class="hl-yellow"><strong>Exercise 3</strong></span></a></li><li><a href="#tabset-8-4"><span class="hl-yellow"><strong>Exercise 4</strong></span></a></li><li><a href="#tabset-8-5"><span class="hl-yellow"><strong>Exercise 5</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-8-1">
<p>üìù Select only the characters that are human and brown-eyed, then sort them in descending height and ascending weight.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb359"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb359-1"><a href="#cb359-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb359-2"><a href="#cb359-2"></a>  <span class="fu">filter</span>(eye_color <span class="sc">==</span> <span class="st">"brown"</span> <span class="sc">&amp;</span> species <span class="sc">==</span> <span class="st">"Human"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb359-3"><a href="#cb359-3"></a>  <span class="fu">arrange</span>(height, <span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-2">
<p>üìù Randomly extract 3 rows.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb360"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb360-1"><a href="#cb360-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-3">
<p>üìù Sampling (randomly) 10% of data.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb361"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb361-1"><a href="#cb361-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_sample</span>(<span class="at">prop =</span> <span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-4">
<p>üìù Randomly draws 10 characters but in such a way that the probability of each character being drawn is proportional to its weight (heavier, more likely).</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb362"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb362-1"><a href="#cb362-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb362-2"><a href="#cb362-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb362-3"><a href="#cb362-3"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">10</span>, <span class="at">weight_by =</span> mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-8-5">
<p>üìù Select the 3 oldest characters.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb363"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb363-1"><a href="#cb363-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">slice_max</span>(birth_year, <span class="at">n =</span> <span class="dv">3</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="rearrange-rows-arrange" class="slide level2">
<h2>Rearrange rows: arrange()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb364"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb364-1"><a href="#cb364-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">ordenar</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb365"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb365-1"><a href="#cb365-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>We can also <span class="hl-yellow"><strong>order rows</strong></span> according to some variable with <code>arrange()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb366"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb366-1"><a href="#cb366-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 6
  name                  height  mass hair_color skin_color  eye_color
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;       &lt;chr&gt;    
1 Ratts Tyerell             79    15 none       grey, blue  unknown  
2 Yoda                      66    17 white      green       brown    
3 Wicket Systri Warrick     88    20 brown      brown       brown    
4 R2-D2                     96    32 &lt;NA&gt;       white, blue red      
5 R5-D4                     97    32 &lt;NA&gt;       white, red  red      </code></pre>
</div>
</div>
<div class="fragment">
<p>By default, arranging is done <span class="hl-yellow"><strong>from lowest to highest</strong></span> but we can <span class="hl-purple"><strong>reverse the order</strong></span> with <code>desc()</code>.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb368"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb368-1"><a href="#cb368-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(<span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 3
  name         height  mass
  &lt;chr&gt;         &lt;int&gt; &lt;dbl&gt;
1 Yarael Poof     264    NA
2 Tarfful         234   136
3 Lama Su         229    88
4 Chewbacca       228   112
5 Roos Tarpals    224    82</code></pre>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb370"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb370-1"><a href="#cb370-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">arrange</span>(mass, <span class="fu">desc</span>(height))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 3
  name                  height  mass
  &lt;chr&gt;                  &lt;int&gt; &lt;dbl&gt;
1 Ratts Tyerell             79    15
2 Yoda                      66    17
3 Wicket Systri Warrick     88    20
4 R5-D4                     97    32
5 R2-D2                     96    32</code></pre>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="remove-duplicates-distinct" class="slide level2">
<h2>Remove duplicates: distinct()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb372"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb372-1"><a href="#cb372-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">sin_duplicados</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb373"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb373-1"><a href="#cb373-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(var1, var2, ...)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Many times we will need to make sure that there are no duplicates in some variable (DNI) and we can <span class="hl-yellow"><strong>delete duplicate rows</strong></span> with <code>distinct()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb374"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb374-1"><a href="#cb374-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 5 √ó 1
  sex           
  &lt;chr&gt;         
1 male          
2 none          
3 female        
4 hermaphroditic
5 &lt;NA&gt;          </code></pre>
</div>
</div>
<div class="fragment">
<p>To keep all variables we will use <code>.keep_all = TRUE</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb376"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb376-1"><a href="#cb376-1"></a>starwars <span class="sc">|&gt;</span> <span class="fu">distinct</span>(sex, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 3 √ó 14
  name      height  mass hair_color skin_color eye_color birth_year sex   gender
  &lt;chr&gt;      &lt;int&gt; &lt;dbl&gt; &lt;chr&gt;      &lt;chr&gt;      &lt;chr&gt;          &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
1 Luke Sky‚Ä¶    172    77 blond      fair       blue              19 male  mascu‚Ä¶
2 C-3PO        167    75 &lt;NA&gt;       gold       yellow           112 none  mascu‚Ä¶
3 Leia Org‚Ä¶    150    49 brown      light      brown             19 fema‚Ä¶ femin‚Ä¶
# ‚Ñπ 5 more variables: homeworld &lt;chr&gt;, species &lt;chr&gt;, films &lt;list&gt;,
#   vehicles &lt;list&gt;, starships &lt;list&gt;</code></pre>
</div>
</div>
</div>
</section>
<section id="add-rows-bind_rows" class="slide level2">
<h2>Add rows: bind_rows()</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb378"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb378-1"><a href="#cb378-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">encuadernar_filas</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb379"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb379-1"><a href="#cb379-1"></a>tibble1 <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(tibble2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
<p>Finally, we can <span class="hl-yellow"><strong>bind new rows</strong></span> with <code>bind_rows()</code> with <span class="hl-red"><strong>new observations in table</strong></span> (if columns do not match fill with missing data)</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb380"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb380-1"><a href="#cb380-1"></a>datos <span class="ot">&lt;-</span></span>
<span id="cb380-2"><a href="#cb380-2"></a>  <span class="fu">tibble</span>(<span class="st">"names"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"javi"</span>, <span class="st">"laura"</span>), <span class="st">"ages"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">33</span>, <span class="dv">50</span>))</span>
<span id="cb380-3"><a href="#cb380-3"></a>datos</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 √ó 2
  names  ages
  &lt;chr&gt; &lt;dbl&gt;
1 javi     33
2 laura    50</code></pre>
</div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb382"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb382-1"><a href="#cb382-1"></a>datos <span class="sc">|&gt;</span> <span class="fu">bind_rows</span>(<span class="fu">tibble</span>(<span class="st">"names"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="st">"carlos"</span>, <span class="cn">NA</span>), <span class="st">"zip"</span> <span class="ot">=</span> <span class="fu">c</span>(<span class="dv">28045</span>, <span class="dv">28019</span>)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 4 √ó 3
  names   ages   zip
  &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt;
1 javi      33    NA
2 laura     50    NA
3 carlos    NA 28045
4 &lt;NA&gt;      NA 28019</code></pre>
</div>
</div>
</div>
</section>
<section id="tu-turno-3b" class="slide level2">
<h2>üíª Your turn</h2>
<p><span style="color:#444442;"><strong>Try to solve the following exercises without looking at the solutions</strong></span></p>
<div class="panel-tabset">
<ul id="tabset-9" class="panel-tabset-tabby"><li><a data-tabby-default="" href="#tabset-9-1"><span class="hl-yellow"><strong>Exercise 1</strong></span></a></li><li><a href="#tabset-9-2"><span class="hl-yellow"><strong>Exercise 2</strong></span></a></li></ul>
<div class="tab-content">
<div id="tabset-9-1">
<p>üìù To find out what unique values are in the hair color, remove duplicates of the <code>hair_color</code> variable by first removing the missing ones from the <code>hair_color</code> variable.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb384"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb384-1"><a href="#cb384-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb384-2"><a href="#cb384-2"></a>  <span class="fu">drop_na</span>(hair_color) <span class="sc">|&gt;</span> </span>
<span id="cb384-3"><a href="#cb384-3"></a>  <span class="fu">distinct</span>(hair_color)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
<div id="tabset-9-2">
<p>üìù Just considering the characters that are human and taller than 160 cm, eliminate duplicates in eye color, eliminate missing data in weight, select the 3 tallest, and order from tallest to shortest in weight. Return the table.</p>
<div class="cell">
<details>
<summary>C√≥digo</summary>
<div class="sourceCode cell-code" id="cb385"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb385-1"><a href="#cb385-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb385-2"><a href="#cb385-2"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">160</span>) <span class="sc">|&gt;</span> </span>
<span id="cb385-3"><a href="#cb385-3"></a>  <span class="fu">distinct</span>(eye_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span> </span>
<span id="cb385-4"><a href="#cb385-4"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb385-5"><a href="#cb385-5"></a>  <span class="fu">slice_max</span>(height, <span class="at">n =</span> <span class="dv">3</span>) <span class="sc">|&gt;</span> </span>
<span id="cb385-6"><a href="#cb385-6"></a>  <span class="fu">arrange</span>(<span class="fu">desc</span>(mass))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</div>
</div>
</div>
</section>
<section id="in-summary" class="slide level2">
<h2>In summary</h2>
<p>The key to <code>{tidyverse}</code> is the <span class="hl-yellow"><strong>legibility</strong></span>: it is very important that the code is understood, for our future self but also for the <span class="hl-yellow"><strong>algorithmic transparency</strong></span> towards the others</p>
<p><span class="hl-purple"><strong>For example</strong></span>: we will remove absent from the weight variable, we will filter the human characters and height higher than 140cm, without duplicates in the hair color, extracting the 5 tallest and obtaining 2 random characters finally.</p>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb386"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb386-1"><a href="#cb386-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb386-2"><a href="#cb386-2"></a>  <span class="fu">elimino_ausentes</span>(peso) <span class="sc">|&gt;</span> </span>
<span id="cb386-3"><a href="#cb386-3"></a>  <span class="fu">filtro</span>(especie humana Y altura <span class="sc">&gt;</span> <span class="dv">140</span> cm) <span class="sc">|&gt;</span> </span>
<span id="cb386-4"><a href="#cb386-4"></a>  <span class="fu">sin_duplicados</span>(color de pelo) <span class="sc">|&gt;</span></span>
<span id="cb386-5"><a href="#cb386-5"></a>  <span class="fu">rebanadas_max</span>(peso, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb386-6"><a href="#cb386-6"></a>  <span class="fu">rebanadas_aleatorias</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb387"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb387-1"><a href="#cb387-1"></a>starwars <span class="sc">|&gt;</span></span>
<span id="cb387-2"><a href="#cb387-2"></a>  <span class="fu">drop_na</span>(mass) <span class="sc">|&gt;</span> </span>
<span id="cb387-3"><a href="#cb387-3"></a>  <span class="fu">filter</span>(species <span class="sc">==</span> <span class="st">"Human"</span> <span class="sc">&amp;</span> height <span class="sc">&gt;</span> <span class="dv">140</span>) <span class="sc">|&gt;</span> </span>
<span id="cb387-4"><a href="#cb387-4"></a>  <span class="fu">distinct</span>(hair_color, <span class="at">.keep_all =</span> <span class="cn">TRUE</span>) <span class="sc">|&gt;</span></span>
<span id="cb387-5"><a href="#cb387-5"></a>  <span class="fu">slice_max</span>(mass, <span class="at">n =</span> <span class="dv">5</span>) <span class="sc">|&gt;</span> </span>
<span id="cb387-6"><a href="#cb387-6"></a>  <span class="fu">slice_sample</span>(<span class="at">n =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</div>
</section>
<section id="caso-pr√°ctico-3" class="slide level2">
<h2>üê£ Case study</h2>
<p>We are going to use the <code>biopsy</code> dataset that can be found in the dataset aggregator <a href="https://vincentarelbundock.github.io/Rdatasets/index.html" class="uri">https://vincentarelbundock.github.io/Rdatasets/index.html</a>. The <span class="hl-yellow"><strong>dataset contains data from 699 patients who underwent a breast biopsy</strong></span>, obtaining 11 variables (one id and 10 scales measured from 1 to 10).</p>
<p>You can see the documentation at <a href="https://vincentarelbundock.github.io/Rdatasets/doc/MASS/biopsy.html" class="uri">https://vincentarelbundock.github.io/Rdatasets/doc/MASS/biopsy.html</a> . . .</p>
<ol type="1">
<li><p><span class="hl-yellow"><strong>Load the dataset</strong></span> from the <code>{MASS}</code> package. . . .</p></li>
<li><p>The variable <code>ID</code> should be the identifier of each record: <span class="hl-yellow"><strong>eliminate duplicates</strong></span> for that variable of the previous dataset.</p></li>
</ol>
</section>
<section id="caso-pr√°ctico-3a" class="slide level2">
<h2>üê£ Case study</h2>
<ol start="3" type="1">
<li>From the above dataset <span class="hl-yellow"><strong>filter</strong></span> only patients with malignant tumor and the variable <code>V9</code> with value 4 or lower, <span class="hl-yellow"><strong>further deleting any records containing missing data</strong></span> in any of the variables.</li>
</ol>
<div class="fragment">
<ol start="4" type="1">
<li>From the above dataset obtain a <span class="hl-yellow"><strong>sample of 20% of the data</strong></span> (each record can be chosen with the same probability), and <span class="hl-yellow"><strong>sort them</strong></span> from highest to lowest by the variable <code>V1</code> and, in case of a tie, from lowest to highest by the variable <code>V2</code>.</li>
</ol>
<div class="footer footer-default">
<p><a href="..."><strong>Javier √Ålvarez Li√©bana</strong></a> ‚Ä¢ Master in Computational Social Sciences ‚Ä¢ 2023-2024</p>
</div>
</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="index_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="index_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="index_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="index_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/socket.io.js"></script>
  <script src="index_files/libs/revealjs/plugin/multiplex/multiplex.js"></script>
  <script src="index_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="index_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="index_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="index_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="index_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true,"width":"normal"},
'chalkboard': {"buttons":true},
'multiplex': {"secret":"16956441010174300204","id":"48f01a60569d3088","url":"https://reveal-multiplex.glitch.me/"},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>